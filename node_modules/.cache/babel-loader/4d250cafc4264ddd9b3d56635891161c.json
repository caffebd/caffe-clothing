{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/thread-loader/dist/cjs.js!/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js!/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/MapPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/MapPage.vue","mtime":1606635676168},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluZGV4LW9mIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIi9Vc2Vycy9sdWtlL0RvY3VtZW50cy9WVUUvYnQtc3RhcnRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfb2JqZWN0U3ByZWFkIGZyb20gIi9Vc2Vycy9sdWtlL0RvY3VtZW50cy9WVUUvYnQtc3RhcnRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiL1VzZXJzL2x1a2UvRG9jdW1lbnRzL1ZVRS9idC1zdGFydGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9sdWtlL0RvY3VtZW50cy9WVUUvYnQtc3RhcnRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vIERFTU8gQ2FyZHMgZm9yIGRhc2hib2FyZAovL2ltcG9ydCBTYWxlc0NhcmQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9kYXNoYm9hcmQvSW5ib3hDYXJkJwppbXBvcnQgTWFwQ2FyZCBmcm9tICcuLi8uLi9wYWdlcy91aS9tYXBzL19leGFtcGxlcy9nb29nbGUtbWFwcy9zaW1wbGUvaW5mby13aW5kb3cnOwppbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uL21haW4nOwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7CnZhciBxdWVyeSA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBNYXBDYXJkOiBNYXBDYXJkCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogZmFsc2UsCiAgICAgIG1vZGU6IGZhbHNlLAogICAgICBjaGFydFR5cGU6ICdHcm91cCcsCiAgICAgIGxvYWRpbmdJbnRlcnZhbDogbnVsbCwKICAgICAgZW1haWw6ICcnLAogICAgICBmb3VuZFVzZXI6IG51bGwsCiAgICAgIGlzTG9hZGluZzE6IHRydWUsCiAgICAgIGZyb21EYXRlTWVudTogZmFsc2UsCiAgICAgIGZyb21EYXRlVmFsOiBudWxsLAogICAgICBkYXRlczogW10sCiAgICAgIG1vZGFsOiBmYWxzZSwKICAgICAgbWluRGF0ZTogJzIwMTktMDctMDQnLAogICAgICBtYXhEYXRlOiAnMjAzMC0wOC0zMCcsCiAgICAgIGFsbFNlYXJjaERhdGVzOiBbXSwKICAgICAgYWxsUmVzdWx0czogW10sCiAgICAgIGNoYWxsZW5nZUxpc3Q6IFtdLAogICAgICBjaGFsbGVuZ2VTTVNMaXN0OiBbXSwKICAgICAgc2VjcmV0TGlzdDogW10sCiAgICAgIHNlY3JldFNNU0xpc3Q6IFtdLAogICAgICB0aW1lckxpc3Q6IFtdLAogICAgICB0aW1lclNNU0xpc3Q6IFtdLAogICAgICB1c2VyU01TTGlzdDogW10sCiAgICAgIHpvbmVMaXN0OiBbXSwKICAgICAgem9uZVNNU0xpc3Q6IFtdLAogICAgICBhbGFybUxpc3Q6IFtdLAogICAgICBzZW5kTWFwRGF0YTogW10sCiAgICAgIHNlbGVjdENoYWxsZW5nZTogdHJ1ZSwKICAgICAgc2VsZWN0Q2hhbGxlbmdlU01TOiB0cnVlLAogICAgICBzZWxlY3RTZWNyZXQ6IHRydWUsCiAgICAgIHNlbGVjdFNlY3JldFNNUzogZmFsc2UsCiAgICAgIHNlbGVjdFRpbWVyOiB0cnVlLAogICAgICBzZWxlY3RUaW1lclNNUzogdHJ1ZSwKICAgICAgc2VsZWN0Wm9uZTogZmFsc2UsCiAgICAgIHNlbGVjdFpvbmVTTVM6IGZhbHNlLAogICAgICBzZWxlY3RVc2VyU01TOiB0cnVlLAogICAgICBzZWxlY3RBbGFybTogdHJ1ZSwKICAgICAgZ3JvdXBDaGFsbGVuZ2VDb3VudDogMCwKICAgICAgZ3JvdXBDaGFsbGVuZ2VTTVNDb3VudDogMCwKICAgICAgZ3JvdXBTZWNyZXRDb3VudDogMCwKICAgICAgZ3JvdXBTZWNyZXRTTVNDb3VudDogMCwKICAgICAgZ3JvdXBUaW1lckNvdW50OiAwLAogICAgICBncm91cFRpbWVyU01TQ291bnQ6IDAsCiAgICAgIGdyb3VwWm9uZUNvdW50OiAwLAogICAgICBncm91cFpvbmVTTVNDb3VudDogMCwKICAgICAgZ3JvdXBVc2VyU01TQ291bnQ6IDAsCiAgICAgIGdyb3VwQWxhcm1Db3VudDogMCwKICAgICAgY2hhbGxlbmdlQ2hlY2s6IGZhbHNlLAogICAgICBjaGFsbGVuZ2VTTVNDaGVjazogZmFsc2UsCiAgICAgIHNlY3JldENoZWNrOiBmYWxzZSwKICAgICAgc2VjcmV0U01TQ2hlY2s6IGZhbHNlLAogICAgICB0aW1lckNoZWNrOiBmYWxzZSwKICAgICAgdGltZXJTTVNDaGVjazogZmFsc2UsCiAgICAgIHpvbmVDaGVjazogZmFsc2UsCiAgICAgIHpvbmVTTVNDaGVjazogZmFsc2UsCiAgICAgIHVzZXJTTVNDaGVjazogZmFsc2UsCiAgICAgIGFsYXJtQ2hlY2s6IGZhbHNlLAogICAgICBsb3dlckFnZTogMSwKICAgICAgdXBwZXJBZ2U6IDk5LAogICAgICBsb3dlclRpbWU6IDAsCiAgICAgIHVwcGVyVGltZTogMjQsCiAgICAgIGFjdGl2ZUNoZWNrQm94ZXM6IFtdLAogICAgICBtYXBJY29uczogewogICAgICAgICJ0aW1lciI6ICJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy82LzgvZi9jLzExOTQ5ODg5OTcxNzA2ODQ3MTE1Y2xvY2swMS5zdmcudGh1bWIucG5nIiwKICAgICAgICAidGltZXItc21zIjogImh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzLzYvOC9mL2MvMTE5NDk4ODk5NzE3MDY4NDcxMTVjbG9jazAxLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJjaGFsbGVuZ2UiOiAiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvMy83LzEvMy8xMTk0OTg0OTEwNzg1NDc0MzU4c3RvcF9zaWduX21pZ3VlbF9zX25jaGV6Xy5zdmcudGh1bWIucG5nIiwKICAgICAgICAiY2hhbGxlbmdlLXNtcyI6ICJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy8zLzcvMS8zLzExOTQ5ODQ5MTA3ODU0NzQzNThzdG9wX3NpZ25fbWlndWVsX3NfbmNoZXpfLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJzZWNyZXQiOiAiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvYi8zL2YvNi8xMTk3MTQ4NDU1MTc5NDA0NDQ3NmVhcmx5c3dlcnZlcl9VS19TcGVlZF9DYW1lcmFfU2lnbi5zdmcudGh1bWIucG5nIiwKICAgICAgICAic2VjcmV0LXNtcyI6ICJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9iLzMvZi82LzExOTcxNDg0NTUxNzk0MDQ0NDc2ZWFybHlzd2VydmVyX1VLX1NwZWVkX0NhbWVyYV9TaWduLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJ6b25lIjogImh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzLzIvOS9iLzgvMTE5NDk4NDc3NTc2MDA3NTMzNGJ1dHRvbi1ncmVlbl9iZW5qaV9wYXJrXzAxLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJ6b25lcy1zbXMiOiAiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvMi85L2IvOC8xMTk0OTg0Nzc1NzYwMDc1MzM0YnV0dG9uLWdyZWVuX2JlbmppX3BhcmtfMDEuc3ZnLnRodW1iLnBuZyIsCiAgICAgICAgImFsYXJtIjogImh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL2gvei9sL3UvbC9zL3NwZWFrZXItdm9sdW1lLTMtdGgucG5nIiwKICAgICAgICAidXNlci1zbXMiOiAiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvMS9UL0UvRS90L0Mvc21zLXRleHQtdGgucG5nIgogICAgICB9CiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgdmFyIGNvdW50ID0gMDsgLy8gREVNTyBkZWxheSBmb3IgbG9hZGluZyBncmFwaGljcwoKICAgIHRoaXMubG9hZGluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICBfdGhpc1siaXNMb2FkaW5nIi5jb25jYXQoY291bnQrKyldID0gZmFsc2U7CiAgICAgIGlmIChjb3VudCA9PT0gNCkgX3RoaXMuY2xlYXIoKTsKICAgIH0sIDQwMCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5jbGVhcigpOwogIH0sCiAgbWV0aG9kczogewogICAgY2xlYXJBbGxDcml0ZXJpYTogZnVuY3Rpb24gY2xlYXJBbGxDcml0ZXJpYSgpIHsKICAgICAgdGhpcy5jaGFsbGVuZ2VMaXN0ID0gW107CiAgICAgIHRoaXMuY2hhbGxlbmdlU01TTGlzdCA9IFtdOwogICAgICB0aGlzLnNlY3JlTGlzdCA9IFtdOwogICAgICB0aGlzLnNlY3JlU01TTGlzdCA9IFtdOwogICAgICB0aGlzLnRpbWVyTGlzdCA9IFtdOwogICAgICB0aGlzLnRpbWVyU01TTGlzdCA9IFtdOwogICAgICB0aGlzLnVzZXJTTVNMaXN0ID0gW107CiAgICAgIHRoaXMuem9uZUxpc3QgPSBbXTsKICAgICAgdGhpcy56b25lU01TTGlzdCA9IFtdOwogICAgICB0aGlzLmFsYXJtTGlzdCA9IFtdOwogICAgICB0aGlzLnNlbmRNYXBEYXRhID0gW107CiAgICAgIHRoaXMuY2hhbGxlbmdlQ2hlY2sgPSBmYWxzZTsKICAgICAgdGhpcy5jaGFsbGVuZ2VTTVNDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLnNlY3JldENoZWNrID0gZmFsc2U7CiAgICAgIHRoaXMuc2VjcmV0U01TQ2hlY2sgPSBmYWxzZTsKICAgICAgdGhpcy50aW1lckNoZWNrID0gZmFsc2U7CiAgICAgIHRoaXMudGltZXJTTVNDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLnpvbmVDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLnpvbmVTTVNDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLnVzZXJTTVNDaGVjayA9IGZhbHNlOwogICAgICB0aGlzLmFsYXJtQ2hlY2sgPSBmYWxzZTsKICAgICAgdGhpcy5hY3RpdmVDaGVja0JveGVzID0gW107CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0TmV3TWFwRGF0YScsIE9iamVjdC52YWx1ZXModGhpcy5zZW5kTWFwRGF0YSkpOwogICAgfSwKICAgIHRvZ2dsZUNoYXJ0VHlwZTogZnVuY3Rpb24gdG9nZ2xlQ2hhcnRUeXBlKGV2ZW50KSB7CiAgICAgIGNvbnNvbGUubG9nKGV2ZW50KTsKICAgICAgdGhpcy5jbGVhckFsbENyaXRlcmlhKCk7CgogICAgICBpZiAoZXZlbnQgPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuY2hhcnRUeXBlID0gJ0luZGl2aWR1YWwnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY2hhcnRUeXBlID0gJ0dyb3VwJzsKICAgICAgfQogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxvYWRpbmdJbnRlcnZhbCk7CiAgICB9LAogICAgY2hlY2tCb3hUZXN0OiBmdW5jdGlvbiBjaGVja0JveFRlc3QodHlwZSkgewogICAgICBjb25zb2xlLmxvZyh0eXBlICsgJyAnICsgdGhpcy5jaGFsbGVuZ2VDaGVjayk7CgogICAgICBpZiAodGhpcy5hY3RpdmVDaGVja0JveGVzLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgICAgdGhpcy5hY3RpdmVDaGVja0JveGVzLnNwbGljZSh0aGlzLmFjdGl2ZUNoZWNrQm94ZXMuaW5kZXhPZih0eXBlKSwgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hY3RpdmVDaGVja0JveGVzLnB1c2godHlwZSk7CiAgICAgIH0KCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWN0aXZlQ2hlY2tCb3hlcyk7CgogICAgICBpZiAodGhpcy5jaGFydFR5cGUgPT0gJ0dyb3VwJykgewogICAgICAgIHRoaXMuZ2V0R3JvdXBEYXRhKHR5cGUsIGZhbHNlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdENoYXJ0Q29sdW1ucygpOwogICAgICB9CiAgICB9LAogICAgZGF0ZUNoYW5nZWRDaGVja2VyOiBmdW5jdGlvbiBkYXRlQ2hhbmdlZENoZWNrZXIoKSB7CiAgICAgIHRoaXMuc2VuZE1hcERhdGEgPSBbXTsKCiAgICAgIGlmICh0aGlzLmNoYXJ0VHlwZSA9PSAnR3JvdXAnKSB7CiAgICAgICAgZm9yICh2YXIgZCA9IDA7IGQgPCB0aGlzLmFjdGl2ZUNoZWNrQm94ZXMubGVuZ3RoOyBkKyspIHsKICAgICAgICAgIHRoaXMuZ2V0R3JvdXBEYXRhKHRoaXMuYWN0aXZlQ2hlY2tCb3hlc1tkXSwgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2VhcmNoVXNlcnNCeUVtYWlsKCk7CiAgICAgIH0KICAgIH0sCiAgICBjaGFuZ2VEYXRhOiBmdW5jdGlvbiBjaGFuZ2VEYXRhKCkgewogICAgICBpZiAodGhpcy5jaGFydFR5cGUgPT0gJ0dyb3VwJykgewogICAgICAgIHRoaXMuc2VsZWN0Q2hhbGxlbmdlU01TID0gZmFsc2U7CiAgICAgICAgdGhpcy5zZWxlY3RDaGFydENvbHVtbnMoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlYXJjaFVzZXJzQnlFbWFpbCgpOwogICAgICB9IC8vdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3VzZXIvc2V0TmV3RGF0YScsWzE0LDEwNCw3LDksMTBdKQoKICAgIH0sCiAgICBzZXRUaW1lVXNlckV2ZW50c0RvY3M6IGZ1bmN0aW9uIHNldFRpbWVVc2VyRXZlbnRzRG9jcygpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdXNlcklkTGlzdCwgbDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB1c2VySWRMaXN0ID0gW107CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHsKICAgICAgICAgICAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uIChkb2MpIHsKICAgICAgICAgICAgICAgICAgICB1c2VySWRMaXN0LnB1c2goZG9jLnJlZi5pZCk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZXJJZExpc3QpOwoKICAgICAgICAgICAgICAgIGZvciAobCA9IDA7IGwgPCB1c2VySWRMaXN0Lmxlbmd0aDsgbCsrKSB7CiAgICAgICAgICAgICAgICAgIGRiLmNvbGxlY3Rpb24oInVzZXJzIikuZG9jKHVzZXJJZExpc3RbbF0pLmNvbGxlY3Rpb24oJ2V2ZW50cycpLmdldCgpLnRoZW4oZnVuY3Rpb24gKHF1ZXJ5U25hcHNob3QpIHsKICAgICAgICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgICAgICAgdmFyIHNwbGl0VGltZSA9IGRvYy5yZWYuaWQuc3BsaXQoJyAnKVswXTsKICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNwbGl0VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgcHVzaFRpbWUgPSBEYXRlLnBhcnNlKHNwbGl0VGltZSk7CiAgICAgICAgICAgICAgICAgICAgICBkb2MucmVmLnVwZGF0ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRBdDogcHVzaFRpbWUKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobW9tZW50KHB1c2hUaW1lKS5mb3JtYXQoJ01NTSBEbyBZWScpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZXRUaW1lQWxsRG9jczogZnVuY3Rpb24gc2V0VGltZUFsbERvY3MoKSB7CiAgICAgIGRiLmNvbGxlY3Rpb24oImFsYXJtIikuZ2V0KCkudGhlbihmdW5jdGlvbiAocXVlcnlTbmFwc2hvdCkgewogICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICB2YXIgc3BsaXRUaW1lID0gZG9jLnJlZi5pZC5zcGxpdCgnICcpWzBdOwogICAgICAgICAgY29uc29sZS5sb2coc3BsaXRUaW1lKTsKICAgICAgICAgIHZhciBwdXNoVGltZSA9IERhdGUucGFyc2Uoc3BsaXRUaW1lKTsKICAgICAgICAgIGRvYy5yZWYudXBkYXRlKHsKICAgICAgICAgICAgY3JlYXRlZEF0OiBwdXNoVGltZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zb2xlLmxvZyhtb21lbnQocHVzaFRpbWUpLmZvcm1hdCgnTU1NIERvIFlZJykpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRHcm91cERhdGE6IGZ1bmN0aW9uIGdldEdyb3VwRGF0YShjYXRlZ29yeSwgZnJvbURhdGUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgZnVsbERhdGUxLCBmdWxsRGF0ZTIsIHVzZURhdGVzLCB0ZXN0Q29sbGVjdGlvbiwgZW5kVGhpcywgYjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgZnVsbERhdGUxID0gRGF0ZS5wYXJzZShfdGhpczIuZGF0ZXNbMF0pOwogICAgICAgICAgICAgICAgZnVsbERhdGUyID0gRGF0ZS5wYXJzZShfdGhpczIuZGF0ZXNbMV0pOwoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzMi5kYXRlc1swXSA9PSBudWxsKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgaWYgKF90aGlzMi5kYXRlc1sxXSA9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgIF90aGlzMi5kYXRlc1sxXSA9IF90aGlzMi5kYXRlc1swXTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB1c2VEYXRlcyA9IFtdOwoKICAgICAgICAgICAgICAgIGlmIChmdWxsRGF0ZTEgPCBmdWxsRGF0ZTIpIHsKICAgICAgICAgICAgICAgICAgdXNlRGF0ZXMucHVzaChmdWxsRGF0ZTEpOwogICAgICAgICAgICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMik7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMik7CiAgICAgICAgICAgICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2VEYXRlcyk7CiAgICAgICAgICAgICAgICBfdGhpczIuYWxsU2VhcmNoRGF0ZXMgPSBfdGhpczIuZ2V0RGF0ZXModXNlRGF0ZXNbMF0sIHVzZURhdGVzWzFdKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVzZURhdGVzWzFdKTsKCiAgICAgICAgICAgICAgICBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0RGF0ZXMnLCBfdGhpczIuYWxsU2VhcmNoRGF0ZXMpOwoKICAgICAgICAgICAgICAgIHRlc3RDb2xsZWN0aW9uID0gW107IC8vY29udGV4dC5jb21taXQoIlNFVF9NQVRDSEVTIiwgY2F0ZWdvcmllcykKCiAgICAgICAgICAgICAgICBpZiAoZnJvbURhdGUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZW5kVGhpcyA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIGZvciAoYiA9IF90aGlzMi5zZW5kTWFwRGF0YS5sZW5ndGggLSAxOyBiID49IDA7IGItLSkgewogICAgICAgICAgICAgICAgICBpZiAoX3RoaXMyLnNlbmRNYXBEYXRhW2JdWydpbmZvVGV4dCddID09IGNhdGVnb3J5KSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbW92ZSBpdCcpOwogICAgICAgICAgICAgICAgICAgIGVuZFRoaXMgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKF90aGlzMi5zZW5kTWFwRGF0YVtiXSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMi5zZW5kTWFwRGF0YS5zcGxpY2UoYiwgMSk7CgogICAgICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXROZXdNYXBEYXRhJywgT2JqZWN0LnZhbHVlcyhfdGhpczIuc2VuZE1hcERhdGEpKTsKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIGl0Jyk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIWVuZFRoaXMpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxOTsKICAgICAgICAgICAgICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKGNhdGVnb3J5KS5vcmRlckJ5KCdjcmVhdGVkQXQnKS5zdGFydEF0KHVzZURhdGVzWzBdKS5lbmRBdCh1c2VEYXRlc1sxXSkgLy8gLndoZXJlKCdjcmVhdGVkQXQnCiAgICAgICAgICAgICAgICAvLyAgICwgJz09JywgRGF0ZS5wYXJzZSgnMjAyMC0xMS0xNyAwMDowMDowMC4wMDAnKSkKICAgICAgICAgICAgICAgIC5nZXQoKS50aGVuKGZ1bmN0aW9uIChxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2Fubm90IGZpbmQnKTsgLy90aGlzLiRyb3V0ZXIucHVzaCgnL0hlbGxvV29ybGQnKQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sbCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gZG9jLmlkOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzaW5nRGF0ZSA9IG1vbWVudChpZCkuZm9ybWF0KCdNTU0gRG8gWVknKTsKICAgICAgICAgICAgICAgICAgICAgIGRvYy5kYXRhKClbJ2V2ZW50cyddLmZvckVhY2goZnVuY3Rpb24gKGRvYykgewogICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGhlVGltZSA9IGRvYy50aW1lLnNlY29uZHMgKiAxMDAwOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYVRpbWUgPSBwYXJzZUludChtb21lbnQodGhlVGltZSkuZm9ybWF0KCdISCcpKTsgLy9yZW1vdmVkIGFnZSBjaGVjayBmb3Igbm93CiAgICAgICAgICAgICAgICAgICAgICAgIC8vaWYgKGRvYy5hZ2UgPj0gdGhpcy5sb3dlckFnZSAmJiBkb2MuYWdlIDw9IHRoaXMudXBwZXJBZ2UpewoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFUaW1lID49IF90aGlzMi5sb3dlclRpbWUgJiYgYVRpbWUgPD0gX3RoaXMyLnVwcGVyVGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGwucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M6IGRvYwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9IC8vfQoKICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgdGVzdENvbGxlY3Rpb24ucHVzaChfZGVmaW5lUHJvcGVydHkoe30sIHVzaW5nRGF0ZSwgY29sbCkpOwogICAgICAgICAgICAgICAgICAgIH0pOyAvL3RoaXMuYWxsUmVzdWx0cyA9IHRlc3RDb2xsZWN0aW9uCiAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyAodGhpcy5hbGxSZXN1bHRzKQogICAgICAgICAgICAgICAgICAgIC8vdGhpcy5jcmVhdGVBcnJheXMoKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLmZpbGxHcm91cENoYXJ0QXJyYXkodGVzdENvbGxlY3Rpb24sIGNhdGVnb3J5KTsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXROZXdNYXBEYXRhJywgT2JqZWN0LnZhbHVlcyhfdGhpczIuc2VuZE1hcERhdGEpKTsKCiAgICAgICAgICAgICAgY2FzZSAyMjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIHNlYXJjaFVzZXJzQnlFbWFpbDogZnVuY3Rpb24gc2VhcmNoVXNlcnNCeUVtYWlsKCkgewogICAgICB2YXIgX3RoaXMzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBuZXdOdW1iZXIsIHNuYXBzaG90LCB1c2VySWQsIHVzZXJEYXRhLCBkYlVzZXIsIHF1ZXJ5VXNlckRhdGE7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzMy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX3RoaXMzLm1lc3NhZ2UgPSAnJzsKICAgICAgICAgICAgICAgIF90aGlzMy5mb3VuZFVzZXIgPSBudWxsOwogICAgICAgICAgICAgICAgX3RoaXMzLmNoYWxsZW5nZUxpc3QgPSBbXTsKICAgICAgICAgICAgICAgIF90aGlzMy5jaGFsbGVuZ2VTTVNMaXN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczMuc2VjcmVMaXN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczMuc2VjcmVTTVNMaXN0ID0gW107CiAgICAgICAgICAgICAgICBfdGhpczMudGltZXJMaXN0ID0gW10sIF90aGlzMy50aW1lclNNU0xpc3QgPSBbXSwgX3RoaXMzLnVzZXJTTVNMaXN0ID0gW10sIF90aGlzMy56b25lTGlzdCA9IFtdLCBfdGhpczMuem9uZVNNU0xpc3QgPSBbXSwgX3RoaXMzLmFsYXJtTGlzdCA9IFtdOwoKICAgICAgICAgICAgICAgIGlmIChfdGhpczMuZW1haWwuc3Vic3RyaW5nKDAsIDMpICE9ICcrODgnKSB7CiAgICAgICAgICAgICAgICAgIG5ld051bWJlciA9ICcrODgnICsgX3RoaXMzLmVtYWlsOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgbmV3TnVtYmVyID0gX3RoaXMzLmVtYWlsOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICByZXR1cm4gZGIuY29sbGVjdGlvbigndXNlcnMnKS53aGVyZSgndXNlclBob25lJywgJz09JywgbmV3TnVtYmVyKS5nZXQoKTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIHNuYXBzaG90ID0gX2NvbnRleHQzLnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKHNuYXBzaG90LmVtcHR5KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHVzZXJJZCA9IHNuYXBzaG90LmRvY3NbMF0uaWQ7CiAgICAgICAgICAgICAgICB1c2VyRGF0YSA9IHNuYXBzaG90LmRvY3NbMF0uZGF0YSgpOwogICAgICAgICAgICAgICAgX3RoaXMzLmZvdW5kVXNlciA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICAgICAgICBpZDogdXNlcklkCiAgICAgICAgICAgICAgICB9LCB1c2VyRGF0YSk7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oJ3VzZXJzJykuZG9jKHVzZXJJZCkuZ2V0KCk7CgogICAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgICBkYlVzZXIgPSBfY29udGV4dDMuc2VudDsKCiAgICAgICAgICAgICAgICBpZiAoIShkYlVzZXIgIT09IG51bGwpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHF1ZXJ5VXNlckRhdGEgPSBkYlVzZXIuZGF0YSgpOwogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0VXNlckRhdGEnLCB7CiAgICAgICAgICAgICAgICAgIGlkOiBkYlVzZXIuaWQsCiAgICAgICAgICAgICAgICAgIG5hbWU6IHF1ZXJ5VXNlckRhdGEudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgIGVtYWlsOiBxdWVyeVVzZXJEYXRhLmVtYWlsCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICAgIF90aGlzMy5zZWFyY2hVc2VyQW5kRGF0ZSh1c2VySWQpOwoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjc7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOTyBVU0VSJyk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMwOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICBfdGhpczMubWVzc2FnZSA9ICdObyB1c2VyIHdpdGggdGhhdCBlbWFpbCBmb3VuZC4nOwoKICAgICAgICAgICAgICBjYXNlIDMwOgogICAgICAgICAgICAgICAgX3RoaXMzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBjYXNlIDMxOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZ2V0RGF0ZXM6IGZ1bmN0aW9uIGdldERhdGVzKHN0YXJ0RGF0ZSwgc3RvcERhdGUpIHsKICAgICAgdmFyIGRhdGVBcnJheSA9IFtdOwogICAgICB2YXIgY3VycmVudERhdGUgPSBtb21lbnQoc3RhcnREYXRlKTsKICAgICAgdmFyIHN0b3BEYXRlID0gbW9tZW50KHN0b3BEYXRlKTsKCiAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBzdG9wRGF0ZSkgewogICAgICAgIGRhdGVBcnJheS5wdXNoKG1vbWVudChjdXJyZW50RGF0ZSkuZm9ybWF0KCdNTU0gRG8gWVknKSk7CiAgICAgICAgY3VycmVudERhdGUgPSBtb21lbnQoY3VycmVudERhdGUpLmFkZCgxLCAnZGF5cycpOwogICAgICB9CgogICAgICByZXR1cm4gZGF0ZUFycmF5OwogICAgfSwKICAgIHNlYXJjaFVzZXJBbmREYXRlOiBmdW5jdGlvbiBzZWFyY2hVc2VyQW5kRGF0ZSh1aWQpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgZnVsbERhdGUxLCBmdWxsRGF0ZTIsIHVzZURhdGVzLCB0ZXN0Q29sbGVjdGlvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRlc1swXSArICcgMDA6MDA6MDAuMDAwJykKICAgICAgICAgICAgICAgIGZ1bGxEYXRlMSA9IERhdGUucGFyc2UoX3RoaXM0LmRhdGVzWzBdKTsKICAgICAgICAgICAgICAgIGZ1bGxEYXRlMiA9IERhdGUucGFyc2UoX3RoaXM0LmRhdGVzWzFdKTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczQuZGF0ZXNbMF0gPT0gbnVsbCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIGlmIChfdGhpczQuZGF0ZXNbMV0gPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICBfdGhpczQuZGF0ZXNbMV0gPSBfdGhpczQuZGF0ZXNbMF07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdXNlRGF0ZXMgPSBbXTsKCiAgICAgICAgICAgICAgICBpZiAoZnVsbERhdGUxIDwgZnVsbERhdGUyKSB7CiAgICAgICAgICAgICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKTsKICAgICAgICAgICAgICAgICAgdXNlRGF0ZXMucHVzaChmdWxsRGF0ZTIpOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgdXNlRGF0ZXMucHVzaChmdWxsRGF0ZTIpOwogICAgICAgICAgICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlRGF0ZXMpOwogICAgICAgICAgICAgICAgX3RoaXM0LmFsbFNlYXJjaERhdGVzID0gX3RoaXM0LmdldERhdGVzKHVzZURhdGVzWzBdLCB1c2VEYXRlc1sxXSk7CgogICAgICAgICAgICAgICAgX3RoaXM0LiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldERhdGVzJywgX3RoaXM0LmFsbFNlYXJjaERhdGVzKTsKCiAgICAgICAgICAgICAgICB0ZXN0Q29sbGVjdGlvbiA9IFtdOyAvL2NvbnRleHQuY29tbWl0KCJTRVRfTUFUQ0hFUyIsIGNhdGVnb3JpZXMpCgogICAgICAgICAgICAgICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModWlkKS5jb2xsZWN0aW9uKCdldmVudHMnKS5vcmRlckJ5KCdjcmVhdGVkQXQnKS5zdGFydEF0KHVzZURhdGVzWzBdKS5lbmRBdCh1c2VEYXRlc1sxXSkgLy8gLndoZXJlKCdjcmVhdGVkQXQnCiAgICAgICAgICAgICAgICAvLyAgICwgJz09JywgRGF0ZS5wYXJzZSgnMjAyMC0xMS0xNyAwMDowMDowMC4wMDAnKSkKICAgICAgICAgICAgICAgIC5nZXQoKS50aGVuKGZ1bmN0aW9uIChxdWVyeVNuYXBzaG90KSB7CiAgICAgICAgICAgICAgICAgIGlmIChxdWVyeVNuYXBzaG90LmVtcHR5KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2Fubm90IGZpbmQnKTsgLy90aGlzLiRyb3V0ZXIucHVzaCgnL0hlbGxvV29ybGQnKQogICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgY29sbCA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gZG9jLmlkOwogICAgICAgICAgICAgICAgICAgICAgZG9jLmRhdGEoKVsnZXZlbnRzJ10uZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0aGVUaW1lID0gZG9jLnRpbWUuc2Vjb25kcyAqIDEwMDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhVGltZSA9IHBhcnNlSW50KG1vbWVudCh0aGVUaW1lKS5mb3JtYXQoJ0hIJykpOwoKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFUaW1lID49IF90aGlzNC5sb3dlclRpbWUgJiYgYVRpbWUgPD0gX3RoaXM0LnVwcGVyVGltZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgIGNvbGwucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2M6IGRvYwogICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgIHRlc3RDb2xsZWN0aW9uLnB1c2goX2RlZmluZVByb3BlcnR5KHt9LCBpZCwgY29sbCkpOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIF90aGlzNC5hbGxSZXN1bHRzID0gdGVzdENvbGxlY3Rpb247CgogICAgICAgICAgICAgICAgICAgIF90aGlzNC5jcmVhdGVBcnJheXMoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBjcmVhdGVBcnJheXM6IGZ1bmN0aW9uIGNyZWF0ZUFycmF5cygpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDUucHJldiA9IF9jb250ZXh0NS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM1LmFsbFJlc3VsdHMuZm9yRWFjaChmdW5jdGlvbiAoZG9jKSB7CiAgICAgICAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoZG9jKTsgX2kgPCBfT2JqZWN0JGVudHJpZXMubGVuZ3RoOyBfaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9PYmplY3QkZW50cmllcyRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllc1tfaV0sIDIpLAogICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGVudHJpZXMkX2lbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX09iamVjdCRlbnRyaWVzJF9pWzFdOwoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiTkVXICIuY29uY2F0KGtleSwgIjogIikuY29uY2F0KHZhbHVlKSk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHRoZUtleSA9IGtleTsKCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2kyID0gMCwgX09iamVjdCRlbnRyaWVzMiA9IE9iamVjdC5lbnRyaWVzKGRvY1t0aGVLZXldKTsgX2kyIDwgX09iamVjdCRlbnRyaWVzMi5sZW5ndGg7IF9pMisrKSB7CiAgICAgICAgICAgICAgICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzMiRfaSA9IF9zbGljZWRUb0FycmF5KF9PYmplY3QkZW50cmllczJbX2kyXSwgMiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgYWtleSA9IF9PYmplY3QkZW50cmllczIkX2lbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgYXZhbHVlID0gX09iamVjdCRlbnRyaWVzMiRfaVsxXTsKCiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiIi5jb25jYXQoYWtleSwgIjogIikuY29uY2F0KGF2YWx1ZSkpOwogICAgICAgICAgICAgICAgICAgICAgdmFyIHVzaW5nRGF0ZSA9IG1vbWVudChhdmFsdWVbJ2RvYyddWyd0aW1lJ10udG9EYXRlKCkpLmZvcm1hdCgnTU1NIERvIFlZJyk7CiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh1c2luZ0RhdGUpOwoKICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoYXZhbHVlWydkb2MnXVsnY2F0ZWdvcnknXSkgewogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2UnOgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS5jaGFsbGVuZ2VMaXN0LnB1c2goX2RlZmluZVByb3BlcnR5KHt9LCB1c2luZ0RhdGUsIGF2YWx1ZVsnZG9jJ10pKTsgLy90aGlzLmNoYWxsZW5nZUxpc3QucHVzaChhdmFsdWVbJ2RvYyddKQoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2Utc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuY2hhbGxlbmdlU01TTGlzdC5wdXNoKF9kZWZpbmVQcm9wZXJ0eSh7fSwgdXNpbmdEYXRlLCBhdmFsdWVbJ2RvYyddKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VjcmV0JzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuc2VjcmV0TGlzdC5wdXNoKF9kZWZpbmVQcm9wZXJ0eSh7fSwgdXNpbmdEYXRlLCBhdmFsdWVbJ2RvYyddKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnc2VjcmV0LXNtcyc6CiAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXM1LnNlY3JldFNNU0xpc3QucHVzaChfZGVmaW5lUHJvcGVydHkoe30sIHVzaW5nRGF0ZSwgYXZhbHVlWydkb2MnXSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWVyJzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUudGltZXJMaXN0LnB1c2goX2RlZmluZVByb3BlcnR5KHt9LCB1c2luZ0RhdGUsIGF2YWx1ZVsnZG9jJ10pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0aW1lci1zbXMnOgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS50aW1lclNNU0xpc3QucHVzaChfZGVmaW5lUHJvcGVydHkoe30sIHVzaW5nRGF0ZSwgYXZhbHVlWydkb2MnXSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3VzZXItc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUudXNlclNNU0xpc3QucHVzaChfZGVmaW5lUHJvcGVydHkoe30sIHVzaW5nRGF0ZSwgYXZhbHVlWydkb2MnXSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvbmUnOgogICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzNS56b25lTGlzdC5wdXNoKF9kZWZpbmVQcm9wZXJ0eSh7fSwgdXNpbmdEYXRlLCBhdmFsdWVbJ2RvYyddKSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnem9uZXMtc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuem9uZVNNU0xpc3QucHVzaChfZGVmaW5lUHJvcGVydHkoe30sIHVzaW5nRGF0ZSwgYXZhbHVlWydkb2MnXSkpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FsYXJtJzoKICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpczUuYWxhcm1MaXN0LnB1c2goX2RlZmluZVByb3BlcnR5KHt9LCB1c2luZ0RhdGUsIGF2YWx1ZVsnZG9jJ10pKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgX3RoaXM1LnNlbGVjdENoYXJ0Q29sdW1ucygpOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZWxlY3RDaGFydENvbHVtbnM6IGZ1bmN0aW9uIHNlbGVjdENoYXJ0Q29sdW1ucygpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXM2LnNlbmRNYXBEYXRhID0gW107CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpczYuYWxhcm1MaXN0KTsKCiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczYuY2hhbGxlbmdlTGlzdC5sZW5ndGggPiAwICYmIF90aGlzNi5jaGFsbGVuZ2VDaGVjaykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZpbGxDaGFydEFycmF5KF90aGlzNi5jaGFsbGVuZ2VMaXN0LCAnQ2hhbGxlbmdlJyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNi5jaGFsbGVuZ2VTTVNMaXN0Lmxlbmd0aCA+IDAgJiYgX3RoaXM2LmNoYWxsZW5nZVNNU0NoZWNrKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDg7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlsbENoYXJ0QXJyYXkoX3RoaXM2LmNoYWxsZW5nZVNNU0xpc3QsICdDaGFsbGVuZ2UgU01TJyk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNi5zZWNyZXRMaXN0Lmxlbmd0aCA+IDAgJiYgX3RoaXM2LnNlY3JldENoZWNrKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDExOwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5maWxsQ2hhcnRBcnJheShfdGhpczYuc2VjcmV0TGlzdCwgJ1NlY3JldCcpOwoKICAgICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnNlY3JldFNNU0xpc3QubGVuZ3RoID4gMCAmJiBfdGhpczYuc2VjcmV0U01TQ2hlY2spKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZpbGxDaGFydEFycmF5KF90aGlzNi5zZWNyZXRTTVNMaXN0LCAnU2VjcmV0IFNNUycpOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnRpbWVyTGlzdC5sZW5ndGggPiAwICYmIF90aGlzNi50aW1lckNoZWNrKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNi5maWxsQ2hhcnRBcnJheShfdGhpczYudGltZXJMaXN0LCAnVGltZXInKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNi50aW1lclNNU0xpc3QubGVuZ3RoID4gMCAmJiBfdGhpczYudGltZXJTTVNDaGVjaykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlsbENoYXJ0QXJyYXkoX3RoaXM2LnRpbWVyU01TTGlzdCwgJ1RpbWVyIFNNUycpOwoKICAgICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnpvbmVMaXN0Lmxlbmd0aCA+IDAgJiYgX3RoaXM2LnpvbmVDaGVjaykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlsbENoYXJ0QXJyYXkoX3RoaXM2LnpvbmVMaXN0LCAnWm9uZScpOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgICAgaWYgKCEoX3RoaXM2LnpvbmVTTVNMaXN0Lmxlbmd0aCA+IDAgJiYgX3RoaXM2LnpvbmVTTVNDaGVjaykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAyNjsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczYuZmlsbENoYXJ0QXJyYXkoX3RoaXM2LnpvbmVTTVNMaXN0LCAnWm9uZSBTTVMnKTsKCiAgICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICAgIGlmICghKF90aGlzNi51c2VyU01TTGlzdC5sZW5ndGggPiAwICYmIF90aGlzNi51c2VyU01TQ2hlY2spKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMjk7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZpbGxDaGFydEFycmF5KF90aGlzNi51c2VyU01TTGlzdCwgJ1VzZXIgU01TJyk7CgogICAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgICBpZiAoIShfdGhpczYuYWxhcm1MaXN0Lmxlbmd0aCA+IDAgJiYgX3RoaXM2LmFsYXJtQ2hlY2spKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMzI7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXM2LmZpbGxDaGFydEFycmF5KF90aGlzNi5hbGFybUxpc3QsICdBbGFybScpOwoKICAgICAgICAgICAgICBjYXNlIDMyOgogICAgICAgICAgICAgICAgX3RoaXM2LiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldE5ld01hcERhdGEnLCBPYmplY3QudmFsdWVzKF90aGlzNi5zZW5kTWFwRGF0YSkpOwoKICAgICAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU2KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgZmlsbENoYXJ0QXJyYXk6IGZ1bmN0aW9uIGZpbGxDaGFydEFycmF5KGNyZWF0ZWRMaXN0LCBjYXRlZ29yeSkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciB0YWJ1bGF0ZWRMaXN0LCB0LCBpLCBfaTMsIF9PYmplY3QkZW50cmllczMsIF9PYmplY3QkZW50cmllczMkX2ksIGtleSwgdmFsdWUsIGxhdCwgbG9uZywgaW5mbywgdXNlSWNvbjsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHRhYnVsYXRlZExpc3QgPSB7fTsKCiAgICAgICAgICAgICAgICBmb3IgKHQgPSAwOyB0IDwgX3RoaXM3LmFsbFNlYXJjaERhdGVzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFidWxhdGVkTGlzdCwgX2RlZmluZVByb3BlcnR5KHt9LCBfdGhpczcuYWxsU2VhcmNoRGF0ZXNbdF0sIDApKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY3JlYXRlZExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgZm9yIChfaTMgPSAwLCBfT2JqZWN0JGVudHJpZXMzID0gT2JqZWN0LmVudHJpZXMoY3JlYXRlZExpc3RbaV0pOyBfaTMgPCBfT2JqZWN0JGVudHJpZXMzLmxlbmd0aDsgX2kzKyspIHsKICAgICAgICAgICAgICAgICAgICBfT2JqZWN0JGVudHJpZXMzJF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzM1tfaTNdLCAyKSwga2V5ID0gX09iamVjdCRlbnRyaWVzMyRfaVswXSwgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMzJF9pWzFdOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJORVcgIi5jb25jYXQoa2V5LCAiOiAiKS5jb25jYXQodmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZS5sb2NhdGlvbi5sYXRpdHVkZSk7CiAgICAgICAgICAgICAgICAgICAgbGF0ID0gdmFsdWUubG9jYXRpb24ubGF0aXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgbG9uZyA9IHZhbHVlLmxvY2F0aW9uLmxvbmdpdHVkZTsKICAgICAgICAgICAgICAgICAgICBpbmZvID0gdmFsdWUuY2F0ZWdvcnk7CiAgICAgICAgICAgICAgICAgICAgdXNlSWNvbiA9IF90aGlzNy5tYXBJY29uc1t2YWx1ZS5jYXRlZ29yeV07CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ01QUFBQICcgKyB1c2VJY29uKTsKCiAgICAgICAgICAgICAgICAgICAgX3RoaXM3LnNlbmRNYXBEYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogbG9uZwogICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgIGluZm9UZXh0OiBpbmZvLAogICAgICAgICAgICAgICAgICAgICAgaWNvbjogdXNlSWNvbgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGFidWxhdGVkTGlzdCk7IC8vYXdhaXQgdGhpcy5zZW5kTWFwRGF0YS5wdXNoKHtuYW1lOiBjYXRlZ29yeSwgZGF0YTogT2JqZWN0LnZhbHVlcyh0YWJ1bGF0ZWRMaXN0KX0pCgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIpOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBmaWxsR3JvdXBDaGFydEFycmF5OiBmdW5jdGlvbiBmaWxsR3JvdXBDaGFydEFycmF5KGNyZWF0ZWRMaXN0LCBjYXRlZ29yeSkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU4KCkgewogICAgICAgIHZhciB0YWJ1bGF0ZWRMaXN0LCBmb3JNYXAsIHQsIGksIF9pNCwgX09iamVjdCRlbnRyaWVzNCwgX09iamVjdCRlbnRyaWVzNCRfaSwga2V5LCB2YWx1ZSwgdiwgZ2VvLCBsYXQsIGxvbmcsIGluZm8sIHVzZUljb247CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlOCQoX2NvbnRleHQ4KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0OC5wcmV2ID0gX2NvbnRleHQ4Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICB0YWJ1bGF0ZWRMaXN0ID0ge307CiAgICAgICAgICAgICAgICBmb3JNYXAgPSB7fTsKCiAgICAgICAgICAgICAgICBmb3IgKHQgPSAwOyB0IDwgX3RoaXM4LmFsbFNlYXJjaERhdGVzLmxlbmd0aDsgdCsrKSB7CiAgICAgICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGFidWxhdGVkTGlzdCwgX2RlZmluZVByb3BlcnR5KHt9LCBfdGhpczguYWxsU2VhcmNoRGF0ZXNbdF0sIDApKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY3JlYXRlZExpc3QubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgICAgZm9yIChfaTQgPSAwLCBfT2JqZWN0JGVudHJpZXM0ID0gT2JqZWN0LmVudHJpZXMoY3JlYXRlZExpc3RbaV0pOyBfaTQgPCBfT2JqZWN0JGVudHJpZXM0Lmxlbmd0aDsgX2k0KyspIHsKICAgICAgICAgICAgICAgICAgICBfT2JqZWN0JGVudHJpZXM0JF9pID0gX3NsaWNlZFRvQXJyYXkoX09iamVjdCRlbnRyaWVzNFtfaTRdLCAyKSwga2V5ID0gX09iamVjdCRlbnRyaWVzNCRfaVswXSwgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXM0JF9pWzFdOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJORVcgIi5jb25jYXQoa2V5LCAiOiAiKS5jb25jYXQodmFsdWUpKTsKICAgICAgICAgICAgICAgICAgICB0YWJ1bGF0ZWRMaXN0W2tleV0gPSB2YWx1ZS5sZW5ndGg7IC8vZ2V0IHZhbHVlcyBiZWxvdyBlLmcuIG1hcCBsb2NhdGlvbnMKCiAgICAgICAgICAgICAgICAgICAgZm9yICh2ID0gMDsgdiA8IHZhbHVlLmxlbmd0aDsgdisrKSB7CiAgICAgICAgICAgICAgICAgICAgICBnZW8gPSB2YWx1ZVt2XVsnZG9jJ11bJ2xvY2F0aW9uJ107CiAgICAgICAgICAgICAgICAgICAgICBsYXQgPSBnZW8ubGF0aXR1ZGU7CiAgICAgICAgICAgICAgICAgICAgICBsb25nID0gZ2VvLmxvbmdpdHVkZTsKICAgICAgICAgICAgICAgICAgICAgIGluZm8gPSB2YWx1ZVt2XVsnZG9jJ11bJ2NhdGVnb3J5J107CiAgICAgICAgICAgICAgICAgICAgICB1c2VJY29uID0gX3RoaXM4Lm1hcEljb25zW3ZhbHVlW3ZdWydkb2MnXVsnY2F0ZWdvcnknXV07CgogICAgICAgICAgICAgICAgICAgICAgX3RoaXM4LnNlbmRNYXBEYXRhLnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogewogICAgICAgICAgICAgICAgICAgICAgICAgIGxhdDogbGF0LAogICAgICAgICAgICAgICAgICAgICAgICAgIGxuZzogbG9uZwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICBpbmZvVGV4dDogaW5mbywKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogdXNlSWNvbgogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vY29uc29sZS5sb2cgKGdlby5sYXRpdHVkZSkKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IC8vY29uc29sZS5sb2codGFidWxhdGVkTGlzdCkKICAgICAgICAgICAgICAgIC8vIGF3YWl0IHRoaXMuc2VuZE1hcERhdGEucHVzaCh7bmFtZTogY2F0ZWdvcnksIGRhdGE6IE9iamVjdC52YWx1ZXModGFidWxhdGVkTGlzdCl9KQoKCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOCk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},null]}