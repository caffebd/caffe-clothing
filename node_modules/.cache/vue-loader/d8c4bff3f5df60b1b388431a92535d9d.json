{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/NewsFormPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/NewsFormPage.vue","mtime":1606935529747},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiLCBUaW1lU3RhbXAgfSBmcm9tICcuLi8uLi9tYWluJwppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCcKaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogKCkgPT4gKHsKICAgIHZhbGlkOiB0cnVlLAogICAgZmlsZXM6W10sCiAgICBpbWFnZVJhdzpudWxsLAogICAgcmVjZWl2ZWRVcmw6JycsCiAgICBpbWFnZVVybDonaHR0cHM6Ly9ob21lcGFnZXMuY2FlLndpc2MuZWR1L35lY2U1MzMvaW1hZ2VzL2FpcnBsYW5lLnBuZycsCiAgICB0aXRsZTogJycsCiAgICBhcnRpY2xlOicnLAogICAgYXV0aG9yOicnLAogICAgcG9zdFR5cGU6J3dhcm4nLAogICAgdGl0bGVSdWxlczogWwogICAgICAodikgPT4gISF2IHx8ICdUaXRsZSBpcyByZXF1aXJlZCcsCiAgICAgICh2KSA9PiAodiAmJiB2Lmxlbmd0aCA8PSA4MCkgfHwgJ1RpdGxlIG11c3QgYmUgbGVzcyB0aGFuIDgwIGNoYXJhY3RlcnMnCiAgICBdLAogICAgYXJ0aWNsZVJ1bGVzOiBbCiAgICAgICh2KSA9PiAhIXYgfHwgJ0FydGljbGUgdGV4dCBpcyByZXF1aXJlZCcsCiAgICAgICh2KSA9PiAodiAmJiB2Lmxlbmd0aCA8PSA2MDAwKSB8fCAnQXJ0aWNsZSBtdXN0IGJlIGxlc3MgdGhhbiA2MDAwIGNoYXJhY3RlcnMnCiAgICBdLAogICAgYXV0aG9yUnVsZXM6IFsKICAgICAgKHYpID0+ICEhdiB8fCAnQXV0aG9yIG5hbWUgaXMgcmVxdWlyZWQnLAogICAgICAodikgPT4gKHYgJiYgdi5sZW5ndGggPD0gNDApIHx8ICdOYW1lIG11c3QgYmUgbGVzcyB0aGFuIDQwIGNoYXJhY3RlcnMnCiAgICBdLAogICAgZW1haWw6ICcnLAogICAgZW1haWxSdWxlczogWwogICAgICAodikgPT4gISF2IHx8ICdFLW1haWwgaXMgcmVxdWlyZWQnLAogICAgICAodikgPT4gLy4rQC4rXC4uKy8udGVzdCh2KSB8fCAnRS1tYWlsIG11c3QgYmUgdmFsaWQnCiAgICBdLAogICAgc2VsZWN0OiBudWxsLAogICAgaXRlbXM6IFsKICAgICAgJ0l0ZW0gMScsCiAgICAgICdJdGVtIDInLAogICAgICAnSXRlbSAzJywKICAgICAgJ0l0ZW0gNCcKICAgIF0sCiAgICBjaGVja2JveDogZmFsc2UKICB9KSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgcG9zdCAoKSB7CiAgICAgIGNvbnN0IHVuaXggPSBNYXRoLnJvdW5kKCtuZXcgRGF0ZSgpIC8gMTApCgogICAgICBjb25zdCBkb2NJZCA9IHVuaXgudG9TdHJpbmcoKQoKICAgICAgY29uc3QgdGhlRGF0ZSA9IG1vbWVudCh1bml4KS5mb3JtYXQoJ0RvIE1NTSBZWScpCgogICAgICBjb25zdCBhRGF0ZSA9IGZpcmViYXNlLmZpcmVzdG9yZS5UaW1lc3RhbXAuZnJvbURhdGUobmV3IERhdGUoKSkKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuZmlsZXNbMF0pCgogICAgICBjb25zdCBpbWdOYW1lID0gdGhpcy5pbWFnZS5uYW1lCgogICAgICBjb25zdCBleHQgPSBpbWdOYW1lLnNsaWNlKGltZ05hbWUubGFzdEluZGV4T2YoJy4nKSkKCiAgICAgIGNvbnNvbGUubG9nKGV4dCkKCiAgICAgIGNvbnN0IHN0b3JhZ2VSZWY9ZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZihgbmV3c2ZlZWQvJHtkb2NJZH0ke2V4dH1gKS5wdXQodGhpcy5pbWFnZSk7CiAgICAgICAgc3RvcmFnZVJlZi5vbihgc3RhdGVfY2hhbmdlZGAsc25hcHNob3Q9PnsKICAgICAgICB0aGlzLnVwbG9hZFZhbHVlID0gKHNuYXBzaG90LmJ5dGVzVHJhbnNmZXJyZWQvc25hcHNob3QudG90YWxCeXRlcykqMTAwOwogICAgICAgICAgfSwgZXJyb3I9Pntjb25zb2xlLmxvZyhlcnJvci5tZXNzYWdlKX0sCiAgICAgICAgKCk9Pnt0aGlzLnVwbG9hZFZhbHVlPTEwMDsKICAgICAgICAgICAgc3RvcmFnZVJlZi5zbmFwc2hvdC5yZWYuZ2V0RG93bmxvYWRVUkwoKS50aGVuKCh1cmwpPT57CiAgICAgICAgICAgICAgICB0aGlzLmltZzEgPXVybDsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW1nMSkKICAgICAgICAgICAgICAgIGRiCiAgICAgICAgICAgICAgICAuY29sbGVjdGlvbignbmV3c2ZlZWQnKQogICAgICAgICAgICAgICAgLmRvYyhkb2NJZCkKICAgICAgICAgICAgICAgIC5zZXQoewogICAgICAgICAgICAgICAgICBjYXQ6IHRoaXMucG9zdFR5cGUsCiAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAgICAgICAgICAgICBhcnRpY2xlOiB0aGlzLmFydGljbGUsCiAgICAgICAgICAgICAgICAgIHRpbWU6IGFEYXRlLAogICAgICAgICAgICAgICAgICBhdXRob3I6IHRoaXMuYXV0aG9yLAogICAgICAgICAgICAgICAgICBpbWFnZTogdXJsLAogICAgICAgICAgICAgICAgICBsaWtlczpbXSwKICAgICAgICAgICAgICAgICAgc2hhcmVzOjAsCiAgICAgICAgICAgICAgICAgIHNob3c6dHJ1ZQogICAgICAgICAgICAgIH0pLnRoZW4oKGRvbmUpPT57CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQUxMIERPTkUnKQogICAgICAgICAgICAgICAgdGhpcy50aXRsZT0nJwogICAgICAgICAgICAgICAgdGhpcy5hcnRpY2xlPScnCiAgICAgICAgICAgICAgICB0aGlzLmF1dGhvcj0nJwogICAgICAgICAgICAgICAgdGhpcy5pbWFnZVVybD0nJwogICAgICAgICAgICAgICAgdGhpcy5maWxlcz1bXQogICAgICAgICAgICAgICAgdGhpcy5yZXNldFZhbGlkYXRpb24oKQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICk7CgogICAgICAvLyByZXR1cm4gZmlyZWJhc2Uuc3RvcmFnZSgpLnJlZignbmV3c2ZlZWQvJyArIGRvY0lkICsgZXh0KS4KICAgICAgLy8gICB0aGVuKChmaWxlRGF0YSkgPT4gewogICAgICAvLyAgICAgdGhpcy5yZWNlaXZlZFVybCA9IGZpbGVEYXRhLm1ldGFkYXRhLmRvd25sb2FkVVJMc1swXQoKICAgICAgLy8gICAgIGRiCiAgICAgIC8vICAgICAgIC5jb2xsZWN0aW9uKCduZXdzZmVlZCcpCiAgICAgIC8vICAgICAgIC5kb2MoZG9jSWQpCiAgICAgIC8vICAgICAgIC5zZXQoewogICAgICAvLyAgICAgICAgIHRpdGxlOiB0aGlzLnRpdGxlLAogICAgICAvLyAgICAgICAgIGFydGljbGU6IHRoaXMuYXJ0aWNsZSwKICAgICAgLy8gICAgICAgICB0aW1lOiBhRGF0ZSwKICAgICAgLy8gICAgICAgICBhdXRob3I6IHRoaXMuYXV0aG9yLAogICAgICAvLyAgICAgICAgIGltYWdlOiB0aGlzLnJlY2VpdmVkVXJsCiAgICAgIC8vICAgICAgIH0pCiAgICAgIC8vICAgfSkKCgogICAgfSwKICAgIGltYWdlUHJldmlldygpIHsKICAgICAgY29uc3QgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkKCiAgICAgIGZpbGVSZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsKCkgPT4gewogICAgICAgIHRoaXMuaW1hZ2VVcmwgPSBmaWxlUmVhZGVyLnJlc3VsdAogICAgICB9KQogICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwodGhpcy5maWxlc1swXSkKICAgICAgdGhpcy5pbWFnZSA9IHRoaXMuZmlsZXNbMF0KICAgIH0sCiAgICB2YWxpZGF0ZSAoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSgpCiAgICB9LAogICAgcmVzZXQgKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXQoKQogICAgfSwKICAgIHJlc2V0VmFsaWRhdGlvbiAoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldFZhbGlkYXRpb24oKQogICAgfQogIH0KfQo="},{"version":3,"sources":["NewsFormPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NewsFormPage.vue","sourceRoot":"src/pages/dashboard","sourcesContent":["<template>\n  <v-form\n    ref=\"form\"\n    v-model=\"valid\"\n    lazy-validation\n  >\n  <h2>Bhai Thamen News</h2>\n\n    <v-radio-group\n      v-model=\"postType\"\n      row\n    >\n      <v-radio\n        label=\"Warning\"\n        value=\"warn\"\n      ></v-radio>\n      <v-radio\n        label=\"News\"\n        value=\"news\"\n      ></v-radio>\n      <v-radio\n        label=\"Info\"\n        value=\"info\"\n      ></v-radio>\n    </v-radio-group>\n\n    <v-text-field\n      v-model=\"title\"\n      outlined\n      :counter=\"80\"\n      :rules=\"titleRules\"\n      label=\"Title\"\n      required\n    ></v-text-field>\n\n\n\n\n        <v-textarea\n          v-model=\"article\"\n          clearable\n          auto-grow\n          outlined\n          rows=\"7\"\n          row-height=\"15\"\n          :counter=\"6000\"\n          :rules=\"articleRules\"\n          label=\"Article\"\n          required\n        ></v-textarea>\n\n\n\n    <v-text-field\n      v-model=\"author\"\n      outlined\n      :counter=\"40\"\n      :rules=\"authorRules\"\n      label=\"Author\"\n      required\n    ></v-text-field>\n\n     <v-file-input\n    v-model=\"files\"\n    color=\"deep-purple accent-4\"\n    counter\n    label=\"File input\"\n    multiple\n    placeholder=\"Select your files\"\n    prepend-icon=\"mdi-paperclip\"\n    outlined\n    @change=\"imagePreview\"\n    :show-size=\"1000\"\n  >\n    <template v-slot:selection=\"{ index, text }\">\n      <v-chip\n        v-if=\"index < 2\"\n        color=\"deep-purple accent-4\"\n        dark\n        label\n        small\n      >\n        {{ text }}\n      </v-chip>\n\n      <span\n        v-else-if=\"index === 2\"\n        class=\"overline grey--text text--darken-3 mx-2\"\n      >\n        +{{ files.length - 2 }} File(s)\n      </span>\n    </template>\n  </v-file-input>\n  <v-flex xs12 sm6 offset-sm3>\n    <img :src=\"imageUrl\" height=\"150\">\n\n  </v-flex>\n\n    <v-btn\n      :disabled=\"!valid\"\n      color=\"success\"\n      class=\"mr-4\"\n      @click=\"post\"\n    >\n      Validate\n    </v-btn>\n\n    <v-btn\n      color=\"error\"\n      class=\"mr-4\"\n      @click=\"reset\"\n    >\n      Reset Form\n    </v-btn>\n\n    <v-btn\n      color=\"warning\"\n      @click=\"resetValidation\"\n    >\n      Reset Validation\n    </v-btn>\n  </v-form>\n</template>\n\n<script>\nimport { db, TimeStamp } from '../../main'\nimport moment from 'moment'\nimport firebase from 'firebase'\nexport default {\n  data: () => ({\n    valid: true,\n    files:[],\n    imageRaw:null,\n    receivedUrl:'',\n    imageUrl:'https://homepages.cae.wisc.edu/~ece533/images/airplane.png',\n    title: '',\n    article:'',\n    author:'',\n    postType:'warn',\n    titleRules: [\n      (v) => !!v || 'Title is required',\n      (v) => (v && v.length <= 80) || 'Title must be less than 80 characters'\n    ],\n    articleRules: [\n      (v) => !!v || 'Article text is required',\n      (v) => (v && v.length <= 6000) || 'Article must be less than 6000 characters'\n    ],\n    authorRules: [\n      (v) => !!v || 'Author name is required',\n      (v) => (v && v.length <= 40) || 'Name must be less than 40 characters'\n    ],\n    email: '',\n    emailRules: [\n      (v) => !!v || 'E-mail is required',\n      (v) => /.+@.+\\..+/.test(v) || 'E-mail must be valid'\n    ],\n    select: null,\n    items: [\n      'Item 1',\n      'Item 2',\n      'Item 3',\n      'Item 4'\n    ],\n    checkbox: false\n  }),\n\n  methods: {\n    async post () {\n      const unix = Math.round(+new Date() / 10)\n\n      const docId = unix.toString()\n\n      const theDate = moment(unix).format('Do MMM YY')\n\n      const aDate = firebase.firestore.Timestamp.fromDate(new Date())\n\n      console.log(this.files[0])\n\n      const imgName = this.image.name\n\n      const ext = imgName.slice(imgName.lastIndexOf('.'))\n\n      console.log(ext)\n\n      const storageRef=firebase.storage().ref(`newsfeed/${docId}${ext}`).put(this.image);\n        storageRef.on(`state_changed`,snapshot=>{\n        this.uploadValue = (snapshot.bytesTransferred/snapshot.totalBytes)*100;\n          }, error=>{console.log(error.message)},\n        ()=>{this.uploadValue=100;\n            storageRef.snapshot.ref.getDownloadURL().then((url)=>{\n                this.img1 =url;\n                console.log(this.img1)\n                db\n                .collection('newsfeed')\n                .doc(docId)\n                .set({\n                  cat: this.postType,\n                  title: this.title,\n                  article: this.article,\n                  time: aDate,\n                  author: this.author,\n                  image: url,\n                  likes:[],\n                  shares:0,\n                  show:true\n              }).then((done)=>{\n                console.log('ALL DONE')\n                this.title=''\n                this.article=''\n                this.author=''\n                this.imageUrl=''\n                this.files=[]\n                this.resetValidation()\n              })\n              });\n            }\n          );\n\n      // return firebase.storage().ref('newsfeed/' + docId + ext).\n      //   then((fileData) => {\n      //     this.receivedUrl = fileData.metadata.downloadURLs[0]\n\n      //     db\n      //       .collection('newsfeed')\n      //       .doc(docId)\n      //       .set({\n      //         title: this.title,\n      //         article: this.article,\n      //         time: aDate,\n      //         author: this.author,\n      //         image: this.receivedUrl\n      //       })\n      //   })\n\n\n    },\n    imagePreview() {\n      const fileReader = new FileReader()\n\n      fileReader.addEventListener('load',() => {\n        this.imageUrl = fileReader.result\n      })\n      fileReader.readAsDataURL(this.files[0])\n      this.image = this.files[0]\n    },\n    validate () {\n      this.$refs.form.validate()\n    },\n    reset () {\n      this.$refs.form.reset()\n    },\n    resetValidation () {\n      this.$refs.form.resetValidation()\n    }\n  }\n}\n</script>\n"]}]}