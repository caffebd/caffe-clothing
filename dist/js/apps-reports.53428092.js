(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["apps-reports"],{"04c0":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-grow-1 flex-row mt-2 ml-4"},[a("v-navigation-drawer",{staticClass:"elevation-1 rounded flex-shrink-0",class:[t.$vuetify.rtl?"ml-3":"mr-3"],attrs:{app:t.$vuetify.breakpoint.mdAndDown,permanent:t.$vuetify.breakpoint.lgAndUp,floating:"",right:t.$vuetify.rtl,width:"340"},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("reports-menu",{staticClass:"reports-app-menu pa-2",on:{"open-compose":t.openCompose}})],1),a("div",{staticClass:"d-flex flex-grow-1 flex-column"},[a("v-toolbar",{staticClass:"hidden-lg-and-up flex-grow-0 mb-2"},[a("v-app-bar-nav-icon",{on:{click:function(e){t.drawer=!t.drawer}}}),a("div",{staticClass:"title font-weight-bold"},[t._v("Reports App")])],1),a("router-view",{key:t.$route.fullPath,staticClass:"flex-grow-1",on:{"edit-reports":t.openCompose}})],1),a("reports-compose",{ref:"compose"})],1)},i=[],o=(a("a4d3"),a("e01a"),a("4160"),a("159b"),a("5530")),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-list",{staticClass:"mt-2 pa-0",attrs:{nav:""}},[a("v-list-item",{attrs:{to:"/apps/reports/reports","active-class":"primary--text",link:""}},[a("v-list-item-icon",[a("v-icon",{attrs:{small:""}},[t._v("mdi-checkbox-marked-circle-outline")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("appreports.reports")))])],1),t.incompleteReports.length>0?a("v-list-item-action",[a("v-badge",{staticClass:"font-weight-bold",attrs:{inline:"",color:"primary",content:t.incompleteReports.length}})],1):t._e()],1),a("v-list-item",{attrs:{to:"/apps/reports/completed","active-class":"primary--text",link:""}},[a("v-list-item-icon",[a("v-icon",{attrs:{small:""}},[t._v("mdi-check")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(t.$t("appreports.completed")))])],1)],1)],1),a("v-list",{staticClass:"mt-2 pa-0",attrs:{dense:"",nav:""}},[a("div",{staticClass:"overline pa-1 mt-2"},[t._v(t._s(t.$t("appreports.labels")))]),t._l(t.reportslabels,(function(e){return a("v-list-item",{key:e.id,attrs:{to:"/apps/reports/label/"+e.id,exact:"","active-class":"primary--text",link:""}},[a("v-list-item-icon",[a("v-icon",{attrs:{small:"",color:e.color}},[t._v("mdi-label-outline")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}))],2)],1)},l=[],r=a("2f62"),c={computed:Object(o["a"])(Object(o["a"])({},Object(r["d"])("reports-app",["reportslabels"])),Object(r["b"])("reports-app",["incompleteReports"]))},d=c,p=a("2877"),u=a("6544"),v=a.n(u),h=a("4ca6"),f=a("132d"),m=a("8860"),b=a("da13"),g=a("1800"),k=a("5d23"),x=a("34c3"),_=Object(p["a"])(d,n,l,!1,null,null,null),w=_.exports;v()(_,{VBadge:h["a"],VIcon:f["a"],VList:m["a"],VListItem:b["a"],VListItemAction:g["a"],VListItemContent:k["a"],VListItemIcon:x["a"],VListItemTitle:k["c"]});var y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"600"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"pa-2"},[t._v(" "+t._s(t.isEdit?"Events Found...":"Add Task")+" "),a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("v-divider"),a("div",[a("p",[t._v("Incident Date: "+t._s(this.date))]),a("hr",{staticClass:"solid"})]),t._l(t.foundEvents,(function(e){return a("div",{key:e.id},["challenge"==e.cat?a("h1",[t._v("CHALLENGE")]):t._e(),"secret"==e.cat?a("h1",[t._v("SECRET")]):t._e(),a("div",[a("p",[t._v("Event Category: "+t._s(e.cat))])]),a("div",[a("p",[t._v("Event Type: "+t._s(e.type))])]),a("div",[a("p",[t._v("Event ID: "+t._s(e.id.replace("found","")))])]),a("hr",{staticClass:"solid"})])})),a("div",[a("v-text-field",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:t.$t("common.title"),autofocus:"","hide-details":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),a("v-divider"),a("v-textarea",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:t.$t("common.description"),"hide-details":""},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),a("v-textarea",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:t.$t("common.description"),"hide-details":""},model:{value:t.events,callback:function(e){t.events=e},expression:"events"}}),a("v-divider"),a("v-textarea",{staticClass:"px-2 py-1",attrs:{solo:"",flat:"",placeholder:t.$t("common.description"),"hide-details":""},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}}),a("v-select",{staticClass:"px-2 my-3",attrs:{"menu-props":{bottom:!0,offsetY:!0},items:t.labels,placeholder:"Labels","item-value":"id","hide-selected":"","hide-details":"",solo:"",flat:"",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(e){var s=e.attrs,i=e.item,o=e.parent,n=e.selected;return[i===Object(i)?a("v-chip",t._b({staticClass:"font-weight-bold",attrs:{color:i.color,outlined:"","input-value":n,label:""}},"v-chip",s,!1),[a("span",{staticClass:"pr-2"},[t._v(" "+t._s(i.title)+" ")]),a("v-icon",{attrs:{small:""},on:{click:function(t){return o.selectItem(i)}}},[t._v("close")])],1):t._e()]}},{key:"item",fn:function(t){t.index;var e=t.item;return[a("v-chip",{attrs:{color:e.color,label:"",outlined:"",small:""}})]}}]),model:{value:t.taskLabels,callback:function(e){t.taskLabels=e},expression:"taskLabels"}})],1),a("v-divider"),a("v-card-actions",{staticClass:"pa-2"},[a("v-btn",{attrs:{outlined:""},on:{click:t.close}},[t._v(t._s(t.$t("common.cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.save}},[t._v(t._s(t.$t("common.save")))])],1)],2)],1)},C=[],I=(a("caad"),a("c975"),a("d3b7"),a("25f0"),a("2532"),a("c1df")),O=a.n(I),V=a("56d7"),E={data:function(){return{dialog:!1,title:"",description:"",date:"",task:{},events:[],incidentDate:"",foundEvents:[],taskLabels:[],search:null}},computed:Object(o["a"])(Object(o["a"])({},Object(r["d"])("reports-app",["labels"])),{},{isEdit:function(){return this.task&&this.task.id}}),methods:Object(o["a"])(Object(o["a"])({},Object(r["c"])("reports-app",["updateReports","addReports"])),{},{open:function(t){var e=this;if(t){this.task=t,this.title=this.task.title,this.description=this.task.description,this.date=this.task.date,this.taskLabels=this.task.labels,this.events=this.task.events,this.incidentDate=this.task.docId,console.log(this.incidentDate),this.foundEvents=[];var a=V["db"].collection("challenge").doc(this.incidentDate);a.get().then((function(t){if(t.exists){var a=t.data()["events"];console.log(a);for(var s=0;s<a.length;s++)e.events.includes(a[s].eventId)&&(console.log("FOUND"),e.foundEvents.push({id:"found"+a[s].eventId,cat:a[s].category,type:a[s].type,location:a[s].location}))}else console.log("No such  challenge document!")}));var s=V["db"].collection("secret").doc(this.incidentDate);s.get().then((function(t){if(t.exists){var a=t.data()["events"];console.log(a);for(var s=0;s<a.length;s++)e.events.includes(a[s].eventId)&&(console.log("FOUND secret"),e.foundEvents.push({id:"found"+a[s].eventId,cat:a[s].category,type:a[s].type,location:a[s].location}))}else console.log("No such secret document!")}))}else this.task={},this.title="",this.description="",this.date="",this.taskLabels=[];this.dialog=!0},close:function(){this.dialog=!1},save:function(){var t=this.title,e=this.description,a=this.taskLabels,s={title:t,description:e,labels:a};this.task.id?this.updateTask(Object(o["a"])(Object(o["a"])({},this.task),s)):this.addTask(s),this.close()},filter:function(t,e,a){var s=function(t){return null!==t?t:""},i=s(t.title),o=s(e);return i.toString().toLowerCase().indexOf(o.toString().toLowerCase())>-1}})},$=E,j=a("8336"),D=a("b0afa"),R=a("99d9"),L=a("cc20"),N=a("169a"),T=a("ce7e"),H=a("b974"),A=a("2fa4"),F=a("8654"),G=a("a844"),S=Object(p["a"])($,y,C,!1,null,null,null),z=S.exports;v()(S,{VBtn:j["a"],VCard:D["a"],VCardActions:R["a"],VCardTitle:R["d"],VChip:L["a"],VDialog:N["a"],VDivider:T["a"],VIcon:f["a"],VSelect:H["a"],VSpacer:A["a"],VTextField:F["a"],VTextarea:G["a"]});var B={components:{ReportsMenu:w,ReportsCompose:z},data:function(){return{drawer:null,reports:[]}},created:function(){var t=this,e=[];this.clearReports(),V["db"].collection("reportsFiled").get().then((function(a){a.forEach((function(t){for(var a=t.data()["incidents"],s=0;s<a.length;s++){a[s].id=t.id;var i=1e3*a[s].time.seconds,o=O()(i).format("MMM Do YY");null==a[s].type&&(a[s].type="Violence");var n=[];null!=a[s].attachedEvents&&(n=a[s].attachedEvents);var l={id:a[s].reportUid,docId:t.id,title:"User Report",description:a[s].description,incidentDate:a[s].incidentDate,target:a[s].target,date:o,sortDate:i,events:n,labels:[a[s].type],phone:a[s].userPhone};e.push(l)}})),e.sort((function(t,e){return t.sortDate<e.sortDate?1:-1}));for(var s=0;s<e.length;s++)console.log(e[s]),t.addReports(e[s])}))},methods:Object(o["a"])(Object(o["a"])({},Object(r["c"])("reports-app",["updateReoprts","addReports","clearReports"])),{},{openCompose:function(t){this.$refs.compose.open(t)}})},M=B,U=a("5bc1"),P=a("f774"),Y=a("71d9"),J=Object(p["a"])(M,s,i,!1,null,null,null);e["default"]=J.exports;v()(J,{VAppBarNavIcon:U["a"],VNavigationDrawer:P["a"],VToolbar:Y["a"]})},1681:function(t,e,a){},a844:function(t,e,a){"use strict";a("a9e3");var s=a("5530"),i=(a("1681"),a("8654")),o=a("58df"),n=Object(o["a"])(i["a"]);e["a"]=n.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return Object(s["a"])({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},i["a"].options.computed.classes.call(this))},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight:function(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout((function(){t.autoGrow&&t.calculateInputHeight()}),0)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height="0";var e=t.scrollHeight,a=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(a,e)+"px"}},genInput:function(){var t=i["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){i["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);