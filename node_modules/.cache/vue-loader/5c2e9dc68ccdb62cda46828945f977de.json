{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/apps/email/components/EmailList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/apps/email/components/EmailList.vue","mtime":1598028626000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qCnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KfCBFbWFpbCBMaXN0IENvbXBvbmVudAp8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnwKfCBMaXN0IHRvIGRpc3BsYXkgZW1haWxzCnwKKi8KZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBlbWFpbHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgbGFiZWxzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIGlzTG9hZGluZzogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdEFsbDogZmFsc2UsCiAgICAgIHNlbGVjdEFsbW9zdEFsbDogZmFsc2UsCiAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgbWVudVNlbGVjdGlvbjogW3sKICAgICAgICB0aXRsZTogJ0FsbCcsCiAgICAgICAga2V5OiAnYWxsJwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICdSZWFkJywKICAgICAgICBrZXk6ICdyZWFkJwogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICdVbnJlYWQnLAogICAgICAgIGtleTogJ3VucmVhZCcKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAnU3RhcnJlZCcsCiAgICAgICAga2V5OiAnc3RhcnJlZCcKICAgICAgfV0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBzZWxlY3RlZCh2YWwpIHsKICAgICAgLy8gY2hlY2sgc2VsZWN0QWxsIGludGVybWVkaWF0ZSBzdGF0ZQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMuc2VsZWN0QWxsKSB7CiAgICAgICAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICB0aGlzLnNlbGVjdEFsbCA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuc2VsZWN0QWxtb3N0QWxsID0gZmFsc2UKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGlmICh0aGlzLmVtYWlscy5sZW5ndGggPT09IHZhbC5sZW5ndGgpIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdEFsbW9zdEFsbCA9IGZhbHNlCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5zZWxlY3RBbG1vc3RBbGwgPSB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbk1lbnVTZWxlY3Rpb24oa2V5KSB7CiAgICAgIHN3aXRjaCAoa2V5KSB7CiAgICAgIGNhc2UgJ2FsbCc6CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuZW1haWxzLm1hcCgoaSkgPT4gaS5pZCkKICAgICAgICB0aGlzLnNlbGVjdEFsbCA9IHRydWUKICAgICAgICB0aGlzLnNlbGVjdEFsbW9zdEFsbCA9IGZhbHNlCiAgICAgIH0KICAgIH0sCiAgICBvblNlbGVjdEFsbChzZWxlY3RBbGwpIHsKICAgICAgaWYgKHRoaXMuc2VsZWN0QWxsKSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IFtdCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuZW1haWxzLm1hcCgoaSkgPT4gaS5pZCkKICAgICAgfQoKICAgICAgdGhpcy5zZWxlY3RBbG1vc3RBbGwgPSBmYWxzZQogICAgICB0aGlzLnNlbGVjdEFsbCA9ICF0aGlzLnNlbGVjdEFsbAogICAgfSwKICAgIGdldExhYmVsQ29sb3IoaWQpIHsKICAgICAgY29uc3QgbGFiZWwgPSB0aGlzLmxhYmVscy5maW5kKChsKSA9PiBsLmlkID09PSBpZCkKCiAgICAgIHJldHVybiBsYWJlbCA/IGxhYmVsLmNvbG9yIDogJycKICAgIH0sCiAgICBnZXRMYWJlbFRpdGxlKGlkKSB7CiAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5sYWJlbHMuZmluZCgobCkgPT4gbC5pZCA9PT0gaWQpCgogICAgICByZXR1cm4gbGFiZWwgPyBsYWJlbC50aXRsZSA6ICcnCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["EmailList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"EmailList.vue","sourceRoot":"src/apps/email/components","sourcesContent":["<template>\n  <v-card class=\"min-w-0\">\n    <div class=\"email-app-top px-2 py-1 d-flex align-center\">\n      <v-checkbox :value=\"selectAll\" :indeterminate=\"selectAlmostAll\" @click.stop=\"onSelectAll(selectAll)\"></v-checkbox>\n\n      <v-menu offset-y>\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn icon v-bind=\"attrs\" v-on=\"on\">\n            <v-icon>mdi-menu-down</v-icon>\n          </v-btn>\n        </template>\n\n        <v-list>\n          <v-list-item v-for=\"item in menuSelection\" :key=\"item.key\" link @click=\"onMenuSelection(item.key)\">\n            <v-list-item-title>{{ item.title }}</v-list-item-title>\n          </v-list-item>\n        </v-list>\n      </v-menu>\n\n      <v-btn v-show=\"selected.length === 0\" icon :loading=\"isLoading\" @click=\"$emit('refresh')\">\n        <v-icon>mdi-refresh</v-icon>\n      </v-btn>\n\n      <div v-show=\"selected.length > 0\">\n        <v-btn icon>\n          <v-icon>bx-archive</v-icon>\n        </v-btn>\n        <v-btn icon>\n          <v-icon>mdi-email-mark-as-unread</v-icon>\n        </v-btn>\n        <v-btn icon>\n          <v-icon>bx-trash-alt</v-icon>\n        </v-btn>\n      </div>\n\n      <v-spacer></v-spacer>\n\n      <div class=\"caption mr-1\">1 - 20 of 428</div>\n      <v-btn icon disabled>\n        <v-icon>mdi-chevron-left</v-icon>\n      </v-btn>\n      <v-btn icon>\n        <v-icon>mdi-chevron-right</v-icon>\n      </v-btn>\n    </div>\n\n    <v-divider></v-divider>\n\n    <v-list class=\"py-0\">\n      <template v-for=\"(item, index) in emails\">\n        <v-list-item\n          :key=\"item.title\"\n          :class=\"{\n            'grey lighten-5': item.read && !$vuetify.theme.dark,\n            'v-list-item--active primary--text': selected.indexOf(item.id) !== -1\n          }\"\n          link\n        >\n          <v-list-item-action class=\"d-flex flex-row align-center\">\n            <v-checkbox v-model=\"selected\" :value=\"item.id\"></v-checkbox>\n\n            <v-btn icon class=\"ml-1\" @click=\"item.starred = !item.starred\">\n              <v-icon v-if=\"!item.starred\" color=\"grey lighten-1\">\n                bx-star\n              </v-icon>\n              <v-icon v-else color=\"yellow darken-1\">\n                bx bxs-star\n              </v-icon>\n            </v-btn>\n          </v-list-item-action>\n\n          <v-list-item-content @click=\"$router.push(`/apps/email/inbox/${item.id}`)\">\n            <v-list-item-title v-text=\"item.subject\"></v-list-item-title>\n            <v-list-item-subtitle class=\"font-weight-bold\" v-text=\"item.title\"></v-list-item-subtitle>\n            <v-list-item-subtitle v-text=\"item.content\"></v-list-item-subtitle>\n            <v-list-item-subtitle>\n              <v-chip\n                v-for=\"label in item.labels\"\n                :key=\"label\"\n                :color=\"getLabelColor(label)\"\n                class=\"font-weight-bold mt-1 mr-1\"\n                outlined\n                small\n              >\n                {{ getLabelTitle(label) }}\n              </v-chip>\n            </v-list-item-subtitle>\n          </v-list-item-content>\n\n          <v-list-item-action>\n            <v-list-item-action-text v-text=\"item.time\"></v-list-item-action-text>\n          </v-list-item-action>\n        </v-list-item>\n\n        <v-divider\n          v-if=\"index + 1 < emails.length\"\n          :key=\"index\"\n        ></v-divider>\n      </template>\n      <template v-if=\"!isLoading && emails.length === 0\">\n        <div class=\"px-1 py-6 text-center\">{{ $t('email.emptyList') }}</div>\n      </template>\n    </v-list>\n\n    <v-overlay :value=\"isLoading\" absolute>\n      <v-progress-circular indeterminate size=\"32\"></v-progress-circular>\n    </v-overlay>\n  </v-card>\n</template>\n\n<script>\n/*\n|---------------------------------------------------------------------\n| Email List Component\n|---------------------------------------------------------------------\n|\n| List to display emails\n|\n*/\nexport default {\n  props: {\n    emails: {\n      type: Array,\n      default: () => []\n    },\n    labels: {\n      type: Array,\n      default: () => []\n    },\n    isLoading: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      selectAll: false,\n      selectAlmostAll: false,\n      selected: [],\n      menuSelection: [{\n        title: 'All',\n        key: 'all'\n      }, {\n        title: 'Read',\n        key: 'read'\n      }, {\n        title: 'Unread',\n        key: 'unread'\n      }, {\n        title: 'Starred',\n        key: 'starred'\n      }]\n    }\n  },\n  watch: {\n    selected(val) {\n      // check selectAll intermediate state\n      this.$nextTick(() => {\n        if (this.selectAll) {\n          if (val.length === 0) {\n            this.selectAll = false\n            this.selectAlmostAll = false\n          } else {\n            if (this.emails.length === val.length) {\n              this.selectAlmostAll = false\n            } else {\n              this.selectAlmostAll = true\n            }\n          }\n        }\n      })\n    }\n  },\n  methods: {\n    onMenuSelection(key) {\n      switch (key) {\n      case 'all':\n        this.selected = this.emails.map((i) => i.id)\n        this.selectAll = true\n        this.selectAlmostAll = false\n      }\n    },\n    onSelectAll(selectAll) {\n      if (this.selectAll) {\n        this.selected = []\n      } else {\n        this.selected = this.emails.map((i) => i.id)\n      }\n\n      this.selectAlmostAll = false\n      this.selectAll = !this.selectAll\n    },\n    getLabelColor(id) {\n      const label = this.labels.find((l) => l.id === id)\n\n      return label ? label.color : ''\n    },\n    getLabelTitle(id) {\n      const label = this.labels.find((l) => l.id === id)\n\n      return label ? label.title : ''\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.email-app-top {\n  height: 82px;\n}\n</style>\n"]}]}