{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/apps/chat/pages/ChannelPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/apps/chat/pages/ChannelPage.vue","mtime":1597249840000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBJbnB1dEJveCBmcm9tICcuLi9jb21wb25lbnRzL0lucHV0Qm94JwppbXBvcnQgVXNlckF2YXRhciBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJBdmF0YXInCmltcG9ydCBDaGFubmVsTWVzc2FnZSBmcm9tICcuLi9jb21wb25lbnRzL0NoYW5uZWxNZXNzYWdlJwoKLy8gRGVtbyBtZXNzYWdlcyBhbmQgdXNlcnMKaW1wb3J0IGdldE1lc3NhZ2UsIHsgdXNlcnMgfSBmcm9tICcuLi9jb250ZW50L21lc3NhZ2VzJwoKLyoKfC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp8IENoYXQgQ2hhbm5lbCBQYWdlIENvbXBvbmVudAp8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCnwKfCBMYXlvdXQgdG8gZGlzcGxheSB0aGUgY2hhbm5lbCBtZXNzYWdlcyBhbmQgdXNlcnMgb25saW5lCnwKKi8KZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIElucHV0Qm94LAogICAgVXNlckF2YXRhciwKICAgIENoYW5uZWxNZXNzYWdlCiAgfSwKICBwcm9wczogewogICAgLy8gQ3VycmVudCBsb2dnZWQgdXNlcgogICAgdXNlcjogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSkKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyB1c2VycyBvbmxpbmUgZHJhd2VyCiAgICAgIHVzZXJzRHJhd2VyOiB0cnVlLAoKICAgICAgLy8gY2hhbm5lbCBpbmZvcm1hdGlvbiBhbmQgbWVzc2FnZXMKICAgICAgY2hhbm5lbDogJycsCiAgICAgIG1lc3NhZ2VzOiBbXSwKCiAgICAgIC8vIG9ubGluZSB1c2VycwogICAgICB1c2VyczogWwogICAgICAgIHRoaXMudXNlciwKICAgICAgICAuLi51c2VycwogICAgICBdLAoKICAgICAgLy8gZGVtbyByYW5kb20gbWVzc2FnZSB0aW1lb3V0CiAgICAgIHRpbWVvdXRHZW5lcmF0b3I6IG51bGwKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnJHJvdXRlLnBhcmFtcy5pZCcoKSB7CiAgICAgIHRoaXMuc3RhcnRDaGFubmVsKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLnN0YXJ0Q2hhbm5lbCh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEdlbmVyYXRvcikKICB9LAogIG1ldGhvZHM6IHsKICAgIHN0YXJ0Q2hhbm5lbChjaGFubmVsSWQpIHsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEdlbmVyYXRvcikKCiAgICAgIHRoaXMubWVzc2FnZXMgPSBbXQoKICAgICAgLy8gREVNTzogZ2VuZXJhdGUgcmFuZG9tIG1lc3NhZ2UgdG8gZmlsbCB0aGUgY2hhbm5lbAogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goZ2V0TWVzc2FnZSgpKQogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goZ2V0TWVzc2FnZSgpKQogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goZ2V0TWVzc2FnZSh0aGlzLnVzZXIpKQogICAgICB0aGlzLm1lc3NhZ2VzLnB1c2goZ2V0TWVzc2FnZSgpKQoKICAgICAgdGhpcy5jaGFubmVsID0gY2hhbm5lbElkCgogICAgICB0aGlzLnNlbmRSYW5kb20oKQogICAgfSwKICAgIC8vIFJhbmRvbSBtZXNzYWdlIGdlbmVyYXRvcgogICAgc2VuZFJhbmRvbSgpIHsKICAgICAgdGhpcy50aW1lb3V0R2VuZXJhdG9yID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5tZXNzYWdlcy5wdXNoKGdldE1lc3NhZ2UoKSkKICAgICAgICB0aGlzLnNjcm9sbFRvQm90dG9tKCkKICAgICAgICB0aGlzLnNlbmRSYW5kb20oKQogICAgICB9LCAxMDAwICogKE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDE1KSArIDEpKQogICAgfSwKICAgIC8vIFNlbmQgbWVzc2FnZSB0byBjaGFubmVsCiAgICBzZW5kTWVzc2FnZShtZXNzYWdlKSB7CiAgICAgIHRoaXMubWVzc2FnZXMucHVzaCh7CiAgICAgICAgaWQ6ICdfJyArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KSwKICAgICAgICB1c2VyOiB0aGlzLnVzZXIsCiAgICAgICAgdGV4dDogbWVzc2FnZSwKICAgICAgICB0aW1lc3RhbXA6IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkKICAgICAgfSkKCiAgICAgIHRoaXMuc2Nyb2xsVG9Cb3R0b20oKQogICAgfSwKICAgIHNjcm9sbFRvQm90dG9tKCkgewogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy4kcmVmcy5tZXNzYWdlcy5zY3JvbGxUb3AgPSB0aGlzLiRyZWZzLm1lc3NhZ2VzLnNjcm9sbEhlaWdodAogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["ChannelPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0DA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChannelPage.vue","sourceRoot":"src/apps/chat/pages","sourcesContent":["<template>\n  <div>\n    <!-- channel toolbar -->\n    <v-app-bar flat height=\"64\">\n      <v-app-bar-nav-icon class=\"hidden-lg-and-up\" @click=\"$emit('toggle-menu')\"></v-app-bar-nav-icon>\n      <div class=\"title font-weight-bold\"># {{ $route.params.id }}</div>\n\n      <v-spacer></v-spacer>\n\n      <v-btn class=\"mx-1\" icon @click.stop=\"usersDrawer = !usersDrawer\">\n        <v-icon>mdi-account-group-outline</v-icon>\n      </v-btn>\n    </v-app-bar>\n\n    <v-divider></v-divider>\n\n    <!-- channel messages -->\n    <div class=\"channel-page\">\n      <div id=\"messages\" ref=\"messages\" class=\"messages mx-2\">\n        <transition-group name=\"list\">\n          <channel-message\n            v-for=\"message in messages\"\n            :key=\"message.id\"\n            :message=\"message\"\n            :user=\"user\"\n            class=\"my-4 d-flex\"\n          />\n        </transition-group>\n      </div>\n\n      <div class=\"input-box pa-2\">\n        <input-box :channel=\"channel\" @send-message=\"sendMessage\" />\n      </div>\n    </div>\n\n    <!-- online users drawer -->\n    <v-navigation-drawer\n      v-model=\"usersDrawer\"\n      width=\"180\"\n      :right=\"!$vuetify.rtl\"\n      app\n    >\n      <v-list dense>\n        <v-subheader class=\"mx-1 overline\">\n          {{ $t('chat.online', { count: users.length }) }}\n        </v-subheader>\n        <v-list-item v-for=\"item in users\" :key=\"item.id\" class=\"mb-1\">\n          <user-avatar :user=\"item\" class=\"mx-1\" />\n          <v-list-item-content>\n            <v-list-item-title :class=\"{ 'primary--text': item.id === user.id }\">{{ item.name }}</v-list-item-title>\n          </v-list-item-content>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n  </div>\n</template>\n\n<script>\nimport InputBox from '../components/InputBox'\nimport UserAvatar from '../components/UserAvatar'\nimport ChannelMessage from '../components/ChannelMessage'\n\n// Demo messages and users\nimport getMessage, { users } from '../content/messages'\n\n/*\n|---------------------------------------------------------------------\n| Chat Channel Page Component\n|---------------------------------------------------------------------\n|\n| Layout to display the channel messages and users online\n|\n*/\nexport default {\n  components: {\n    InputBox,\n    UserAvatar,\n    ChannelMessage\n  },\n  props: {\n    // Current logged user\n    user: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  data() {\n    return {\n      // users online drawer\n      usersDrawer: true,\n\n      // channel information and messages\n      channel: '',\n      messages: [],\n\n      // online users\n      users: [\n        this.user,\n        ...users\n      ],\n\n      // demo random message timeout\n      timeoutGenerator: null\n    }\n  },\n  watch: {\n    '$route.params.id'() {\n      this.startChannel(this.$route.params.id)\n    }\n  },\n  mounted() {\n    this.startChannel(this.$route.params.id)\n  },\n  beforeDestroy() {\n    clearTimeout(this.timeoutGenerator)\n  },\n  methods: {\n    startChannel(channelId) {\n      clearTimeout(this.timeoutGenerator)\n\n      this.messages = []\n\n      // DEMO: generate random message to fill the channel\n      this.messages.push(getMessage())\n      this.messages.push(getMessage())\n      this.messages.push(getMessage(this.user))\n      this.messages.push(getMessage())\n\n      this.channel = channelId\n\n      this.sendRandom()\n    },\n    // Random message generator\n    sendRandom() {\n      this.timeoutGenerator = setTimeout(() => {\n        this.messages.push(getMessage())\n        this.scrollToBottom()\n        this.sendRandom()\n      }, 1000 * (Math.floor(Math.random() * 15) + 1))\n    },\n    // Send message to channel\n    sendMessage(message) {\n      this.messages.push({\n        id: '_' + Math.random().toString(36).substr(2, 9),\n        user: this.user,\n        text: message,\n        timestamp: (new Date()).getTime()\n      })\n\n      this.scrollToBottom()\n    },\n    scrollToBottom() {\n      this.$nextTick(() => {\n        this.$refs.messages.scrollTop = this.$refs.messages.scrollHeight\n      })\n    }\n  }\n}\n</script>\n<style lang=\"scss\" scoped>\n// List Transition Animation\n.list-enter-active {\n  transition: all 0.3s;\n}\n\n.list-move {\n  transition: transform 0.3s;\n}\n\n.list-enter,\n.list-leave-to {\n  opacity: 0;\n  transform: translateX(-10px);\n}\n// -- End List Transition Animation\n\n.channel-page {\n  position: absolute;\n  top: 65px;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  background: url(\"/images/chat/chat-bg-2.png\");\n\n  .messages {\n    flex-grow: 1;\n    margin-bottom: 68px;\n    overflow-y: scroll;\n    -webkit-overflow-scrolling: touch;\n    min-height: 0;\n  }\n\n  .input-box {\n    position: fixed;\n    bottom: 12px;\n    width: 100%;\n  }\n\n  .messages {\n    padding-bottom: 0px;\n  }\n\n  .input-box {\n    position: absolute;\n    bottom: 12px;\n  }\n}\n\n.theme--dark {\n  .channel-page {\n    background: none;\n  }\n}\n</style>\n"]}]}