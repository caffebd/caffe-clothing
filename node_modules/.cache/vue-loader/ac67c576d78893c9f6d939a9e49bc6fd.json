{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/MapPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/MapPage.vue","mtime":1606635676168},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8vIERFTU8gQ2FyZHMgZm9yIGRhc2hib2FyZAovL2ltcG9ydCBTYWxlc0NhcmQgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9kYXNoYm9hcmQvSW5ib3hDYXJkJwppbXBvcnQgTWFwQ2FyZCBmcm9tICcuLi8uLi9wYWdlcy91aS9tYXBzL19leGFtcGxlcy9nb29nbGUtbWFwcy9zaW1wbGUvaW5mby13aW5kb3cnCmltcG9ydCB7IGRiIH0gZnJvbSAnLi4vLi4vbWFpbicKaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnCmNvbnN0IHF1ZXJ5ID0gZGIuY29sbGVjdGlvbigndXNlcnMnKQpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgTWFwQ2FyZAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IGZhbHNlLAogICAgICBtb2RlOmZhbHNlLAogICAgICBjaGFydFR5cGU6J0dyb3VwJywKICAgICAgbG9hZGluZ0ludGVydmFsOiBudWxsLAogICAgICBlbWFpbDogJycsCiAgICAgIGZvdW5kVXNlcjogbnVsbCwKICAgICAgaXNMb2FkaW5nMTogdHJ1ZSwKICAgICAgZnJvbURhdGVNZW51OiBmYWxzZSwKICAgICAgZnJvbURhdGVWYWw6IG51bGwsCiAgICAgIGRhdGVzOltdLAogICAgICBtb2RhbDogZmFsc2UsCiAgICAgIG1pbkRhdGU6ICcyMDE5LTA3LTA0JywKICAgICAgbWF4RGF0ZTogJzIwMzAtMDgtMzAnLAogICAgICBhbGxTZWFyY2hEYXRlczogW10sCiAgICAgIGFsbFJlc3VsdHM6IFtdLAogICAgICBjaGFsbGVuZ2VMaXN0OltdLAogICAgICBjaGFsbGVuZ2VTTVNMaXN0OltdLAogICAgICBzZWNyZXRMaXN0OltdLAogICAgICBzZWNyZXRTTVNMaXN0OltdLAogICAgICB0aW1lckxpc3Q6W10sCiAgICAgIHRpbWVyU01TTGlzdDpbXSwKICAgICAgdXNlclNNU0xpc3Q6W10sCiAgICAgIHpvbmVMaXN0OltdLAogICAgICB6b25lU01TTGlzdDpbXSwKICAgICAgYWxhcm1MaXN0OltdLAoKICAgICAgc2VuZE1hcERhdGE6IFtdLAoKICAgICAgc2VsZWN0Q2hhbGxlbmdlOiB0cnVlLAogICAgICBzZWxlY3RDaGFsbGVuZ2VTTVM6dHJ1ZSwKICAgICAgc2VsZWN0U2VjcmV0OnRydWUsCiAgICAgIHNlbGVjdFNlY3JldFNNUzpmYWxzZSwKICAgICAgc2VsZWN0VGltZXI6dHJ1ZSwKICAgICAgc2VsZWN0VGltZXJTTVM6dHJ1ZSwKICAgICAgc2VsZWN0Wm9uZTpmYWxzZSwKICAgICAgc2VsZWN0Wm9uZVNNUzpmYWxzZSwKICAgICAgc2VsZWN0VXNlclNNUzp0cnVlLAogICAgICBzZWxlY3RBbGFybTp0cnVlLAoKICAgICAgZ3JvdXBDaGFsbGVuZ2VDb3VudDowLAogICAgICBncm91cENoYWxsZW5nZVNNU0NvdW50OjAsCiAgICAgIGdyb3VwU2VjcmV0Q291bnQ6MCwKICAgICAgZ3JvdXBTZWNyZXRTTVNDb3VudDowLAogICAgICBncm91cFRpbWVyQ291bnQ6MCwKICAgICAgZ3JvdXBUaW1lclNNU0NvdW50OjAsCiAgICAgIGdyb3VwWm9uZUNvdW50OjAsCiAgICAgIGdyb3VwWm9uZVNNU0NvdW50OjAsCiAgICAgIGdyb3VwVXNlclNNU0NvdW50OjAsCiAgICAgIGdyb3VwQWxhcm1Db3VudDowLAoKICAgICAgY2hhbGxlbmdlQ2hlY2s6ZmFsc2UsCiAgICAgIGNoYWxsZW5nZVNNU0NoZWNrOmZhbHNlLAogICAgICBzZWNyZXRDaGVjazpmYWxzZSwKICAgICAgc2VjcmV0U01TQ2hlY2s6ZmFsc2UsCiAgICAgIHRpbWVyQ2hlY2s6ZmFsc2UsCiAgICAgIHRpbWVyU01TQ2hlY2s6ZmFsc2UsCiAgICAgIHpvbmVDaGVjazpmYWxzZSwKICAgICAgem9uZVNNU0NoZWNrOmZhbHNlLAogICAgICB1c2VyU01TQ2hlY2s6ZmFsc2UsCiAgICAgIGFsYXJtQ2hlY2s6ZmFsc2UsCgogICAgICBsb3dlckFnZToxLAogICAgICB1cHBlckFnZTo5OSwKCiAgICAgIGxvd2VyVGltZTowLAogICAgICB1cHBlclRpbWU6MjQsCgogICAgICBhY3RpdmVDaGVja0JveGVzOltdLAoKICAgICAgbWFwSWNvbnM6ewogICAgICAgICJ0aW1lciI6Imh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzLzYvOC9mL2MvMTE5NDk4ODk5NzE3MDY4NDcxMTVjbG9jazAxLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJ0aW1lci1zbXMiOiJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy82LzgvZi9jLzExOTQ5ODg5OTcxNzA2ODQ3MTE1Y2xvY2swMS5zdmcudGh1bWIucG5nIiwKICAgICAgICAiY2hhbGxlbmdlIjoiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvMy83LzEvMy8xMTk0OTg0OTEwNzg1NDc0MzU4c3RvcF9zaWduX21pZ3VlbF9zX25jaGV6Xy5zdmcudGh1bWIucG5nIiwKICAgICAgICAiY2hhbGxlbmdlLXNtcyI6Imh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzLzMvNy8xLzMvMTE5NDk4NDkxMDc4NTQ3NDM1OHN0b3Bfc2lnbl9taWd1ZWxfc19uY2hlel8uc3ZnLnRodW1iLnBuZyIsCiAgICAgICAgInNlY3JldCI6Imh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL2IvMy9mLzYvMTE5NzE0ODQ1NTE3OTQwNDQ0NzZlYXJseXN3ZXJ2ZXJfVUtfU3BlZWRfQ2FtZXJhX1NpZ24uc3ZnLnRodW1iLnBuZyIsCiAgICAgICAgInNlY3JldC1zbXMiOiJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy9iLzMvZi82LzExOTcxNDg0NTUxNzk0MDQ0NDc2ZWFybHlzd2VydmVyX1VLX1NwZWVkX0NhbWVyYV9TaWduLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJ6b25lIjoiaHR0cDovL3d3dy5jbGtlci5jb20vY2xpcGFydHMvMi85L2IvOC8xMTk0OTg0Nzc1NzYwMDc1MzM0YnV0dG9uLWdyZWVuX2JlbmppX3BhcmtfMDEuc3ZnLnRodW1iLnBuZyIsCiAgICAgICAgInpvbmVzLXNtcyI6Imh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzLzIvOS9iLzgvMTE5NDk4NDc3NTc2MDA3NTMzNGJ1dHRvbi1ncmVlbl9iZW5qaV9wYXJrXzAxLnN2Zy50aHVtYi5wbmciLAogICAgICAgICJhbGFybSI6Imh0dHA6Ly93d3cuY2xrZXIuY29tL2NsaXBhcnRzL2gvei9sL3UvbC9zL3NwZWFrZXItdm9sdW1lLTMtdGgucG5nIiwKICAgICAgICAidXNlci1zbXMiOiJodHRwOi8vd3d3LmNsa2VyLmNvbS9jbGlwYXJ0cy8xL1QvRS9FL3QvQy9zbXMtdGV4dC10aC5wbmciCiAgICAgfQoKCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgbGV0IGNvdW50ID0gMAoKICAgIC8vIERFTU8gZGVsYXkgZm9yIGxvYWRpbmcgZ3JhcGhpY3MKICAgIHRoaXMubG9hZGluZ0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICB0aGlzW2Bpc0xvYWRpbmcke2NvdW50Kyt9YF0gPSBmYWxzZQogICAgICBpZiAoY291bnQgPT09IDQpIHRoaXMuY2xlYXIoKQogICAgfSwgNDAwKQogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuY2xlYXIoKQogIH0sCiAgbWV0aG9kczogewogICAgY2xlYXJBbGxDcml0ZXJpYSgpewogICAgICB0aGlzLmNoYWxsZW5nZUxpc3QgPSBbXQogICAgICB0aGlzLmNoYWxsZW5nZVNNU0xpc3QgPSBbXQogICAgICB0aGlzLnNlY3JlTGlzdCA9IFtdCiAgICAgIHRoaXMuc2VjcmVTTVNMaXN0ID0gW10KICAgICAgdGhpcy50aW1lckxpc3QgPSBbXQogICAgICB0aGlzLnRpbWVyU01TTGlzdCA9IFtdCiAgICAgIHRoaXMudXNlclNNU0xpc3QgPSBbXQogICAgICB0aGlzLnpvbmVMaXN0ID0gW10KICAgICAgdGhpcy56b25lU01TTGlzdCA9IFtdCiAgICAgIHRoaXMuYWxhcm1MaXN0ID0gW10KICAgICAgdGhpcy5zZW5kTWFwRGF0YSA9IFtdCgogICAgICB0aGlzLmNoYWxsZW5nZUNoZWNrID0gZmFsc2UKICAgICAgdGhpcy5jaGFsbGVuZ2VTTVNDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMuc2VjcmV0Q2hlY2sgPSBmYWxzZQogICAgICB0aGlzLnNlY3JldFNNU0NoZWNrID0gZmFsc2UKICAgICAgdGhpcy50aW1lckNoZWNrID0gZmFsc2UKICAgICAgdGhpcy50aW1lclNNU0NoZWNrID0gZmFsc2UKICAgICAgdGhpcy56b25lQ2hlY2sgPSBmYWxzZQogICAgICB0aGlzLnpvbmVTTVNDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMudXNlclNNU0NoZWNrID0gZmFsc2UKICAgICAgdGhpcy5hbGFybUNoZWNrID0gZmFsc2UKCiAgICAgIHRoaXMuYWN0aXZlQ2hlY2tCb3hlcz1bXQoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXROZXdNYXBEYXRhJyxPYmplY3QudmFsdWVzKHRoaXMuc2VuZE1hcERhdGEpKQogICAgfSwKICAgIHRvZ2dsZUNoYXJ0VHlwZShldmVudCl7CiAgICAgIGNvbnNvbGUubG9nKGV2ZW50KQogICAgICB0aGlzLmNsZWFyQWxsQ3JpdGVyaWEoKQogICAgICBpZiAoZXZlbnQ9PXRydWUpewogICAgICAgIHRoaXMuY2hhcnRUeXBlPSdJbmRpdmlkdWFsJwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmNoYXJ0VHlwZT0nR3JvdXAnCiAgICAgIH0KICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxvYWRpbmdJbnRlcnZhbCkKICAgIH0sCiAgICBjaGVja0JveFRlc3QodHlwZSl7CiAgICAgIGNvbnNvbGUubG9nKHR5cGUrJyAnK3RoaXMuY2hhbGxlbmdlQ2hlY2spCiAgICAgIGlmICh0aGlzLmFjdGl2ZUNoZWNrQm94ZXMuaW5jbHVkZXModHlwZSkpewogICAgICAgIHRoaXMuYWN0aXZlQ2hlY2tCb3hlcy5zcGxpY2UodGhpcy5hY3RpdmVDaGVja0JveGVzLmluZGV4T2YodHlwZSksIDEpOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmFjdGl2ZUNoZWNrQm94ZXMucHVzaCh0eXBlKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nICh0aGlzLmFjdGl2ZUNoZWNrQm94ZXMpCgogICAgaWYgKHRoaXMuY2hhcnRUeXBlPT0nR3JvdXAnKXsKICAgICAgdGhpcy5nZXRHcm91cERhdGEodHlwZSwgZmFsc2UpCiAgICB9ZWxzZXsKICAgICAgdGhpcy5zZWxlY3RDaGFydENvbHVtbnMoKQogICAgfQoKICAgIH0sCiAgICBkYXRlQ2hhbmdlZENoZWNrZXIoKXsKCiAgICAgIHRoaXMuc2VuZE1hcERhdGE9W10KCiAgICBpZiAodGhpcy5jaGFydFR5cGU9PSdHcm91cCcpewoKICAgICAgZm9yICh2YXIgZD0wOyBkPHRoaXMuYWN0aXZlQ2hlY2tCb3hlcy5sZW5ndGg7IGQrKyl7CiAgICAgICAgdGhpcy5nZXRHcm91cERhdGEodGhpcy5hY3RpdmVDaGVja0JveGVzW2RdLCB0cnVlKQogICAgICB9CgogICAgfWVsc2V7CiAgICAgIHRoaXMuc2VhcmNoVXNlcnNCeUVtYWlsKCkKICAgIH0KICAgIH0sCiAgICBjaGFuZ2VEYXRhKCkgewoKICAgIGlmICh0aGlzLmNoYXJ0VHlwZT09J0dyb3VwJyl7CiAgICAgICB0aGlzLnNlbGVjdENoYWxsZW5nZVNNUyA9IGZhbHNlCiAgICAgICB0aGlzLnNlbGVjdENoYXJ0Q29sdW1ucygpCiAgICB9ZWxzZXsKICAgICAgdGhpcy5zZWFyY2hVc2Vyc0J5RW1haWwoKQogICAgfQoKCgoKCgogICAgICAvL3RoaXMuJHN0b3JlLmRpc3BhdGNoKCd1c2VyL3NldE5ld0RhdGEnLFsxNCwxMDQsNyw5LDEwXSkKICAgIH0sCgogICAgYXN5bmMgc2V0VGltZVVzZXJFdmVudHNEb2NzKCkgewoKICAgICAgbGV0IHVzZXJJZExpc3Q9W10KICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbigidXNlcnMiKS5nZXQoKS50aGVuKGZ1bmN0aW9uKHF1ZXJ5U25hcHNob3QpIHsKICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGRvYykgewoKICAgICAgICB1c2VySWRMaXN0LnB1c2goZG9jLnJlZi5pZCkKICAgICAgfSkKICAgICAgfSkKCiAgICAgICBjb25zb2xlLmxvZyh1c2VySWRMaXN0KQoKICAgICAgZm9yICh2YXIgbD0wOyBsPHVzZXJJZExpc3QubGVuZ3RoOyBsKyspewoKICAgICAgZGIuY29sbGVjdGlvbigidXNlcnMiKS5kb2ModXNlcklkTGlzdFtsXSkuY29sbGVjdGlvbignZXZlbnRzJykuZ2V0KCkudGhlbihmdW5jdGlvbihxdWVyeVNuYXBzaG90KSB7CiAgICAgIHF1ZXJ5U25hcHNob3QuZm9yRWFjaChmdW5jdGlvbihkb2MpIHsKCiAgICAgIGNvbnN0IHNwbGl0VGltZT1kb2MucmVmLmlkLnNwbGl0KCcgJylbMF07CiAgICAgIGNvbnNvbGUubG9nKHNwbGl0VGltZSkKICAgICAgdmFyIHB1c2hUaW1lID0gRGF0ZS5wYXJzZShzcGxpdFRpbWUpCiAgICAgICAgZG9jLnJlZi51cGRhdGUoewogICAgICAgICAgY3JlYXRlZEF0OiBwdXNoVGltZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKG1vbWVudChwdXNoVGltZSkuZm9ybWF0KCdNTU0gRG8gWVknKSkKCiAgICAgIH0pCgogICAgICB9KQogICAgICB9CgogICAgfSwKCiAgICBzZXRUaW1lQWxsRG9jcygpewogICAgICBkYi5jb2xsZWN0aW9uKCJhbGFybSIpLmdldCgpLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKGZ1bmN0aW9uKGRvYykgewogICAgICBjb25zdCBzcGxpdFRpbWU9ZG9jLnJlZi5pZC5zcGxpdCgnICcpWzBdOwogICAgICBjb25zb2xlLmxvZyhzcGxpdFRpbWUpCiAgICAgIHZhciBwdXNoVGltZSA9IERhdGUucGFyc2Uoc3BsaXRUaW1lKQogICAgICAgIGRvYy5yZWYudXBkYXRlKHsKICAgICAgICAgIGNyZWF0ZWRBdDogcHVzaFRpbWUKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhtb21lbnQocHVzaFRpbWUpLmZvcm1hdCgnTU1NIERvIFlZJykpCiAgICB9KTsKICAgIH0pOwogICAgfSwKCgoKICAgIGFzeW5jIGdldEdyb3VwRGF0YShjYXRlZ29yeSwgZnJvbURhdGUpewoKICAgICAgY29uc3QgZnVsbERhdGUxID0gRGF0ZS5wYXJzZSh0aGlzLmRhdGVzWzBdKQogICAgICBjb25zdCBmdWxsRGF0ZTIgPSBEYXRlLnBhcnNlKHRoaXMuZGF0ZXNbMV0pCgogICAgICBpZiAodGhpcy5kYXRlc1swXT09bnVsbCl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRhdGVzWzFdPT1udWxsKXsKICAgICAgICB0aGlzLmRhdGVzWzFdPXRoaXMuZGF0ZXNbMF0KICAgICAgfQoKICAgICAgY29uc3QgdXNlRGF0ZXMgPSBbXQoKCiAgICAgIGlmIChmdWxsRGF0ZTEgPCBmdWxsRGF0ZTIpIHsKICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMSkKICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMikKICAgICAgfSBlbHNlIHsKICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMikKICAgICAgICB1c2VEYXRlcy5wdXNoKGZ1bGxEYXRlMSkKICAgICAgfQogICAgICBjb25zb2xlLmxvZyAodXNlRGF0ZXMpCgogICAgICB0aGlzLmFsbFNlYXJjaERhdGVzICA9IHRoaXMuZ2V0RGF0ZXModXNlRGF0ZXNbMF0sIHVzZURhdGVzWzFdKQoKICAgICAgY29uc29sZS5sb2codXNlRGF0ZXNbMV0pCgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldERhdGVzJyx0aGlzLmFsbFNlYXJjaERhdGVzICkKCiAgICAgICAgY29uc3QgdGVzdENvbGxlY3Rpb24gPSBbXQogICAgICAvL2NvbnRleHQuY29tbWl0KCJTRVRfTUFUQ0hFUyIsIGNhdGVnb3JpZXMpCgogICAgICBpZiAoIWZyb21EYXRlKXsKICAgICAgICB2YXIgZW5kVGhpcz1mYWxzZTsKICAgICAgZm9yICh2YXIgYj10aGlzLnNlbmRNYXBEYXRhLmxlbmd0aC0xOyBiPj0wOyBiLS0pewogICAgICAgIGlmICh0aGlzLnNlbmRNYXBEYXRhW2JdWydpbmZvVGV4dCddPT1jYXRlZ29yeSl7CiAgICAgICAgICBjb25zb2xlLmxvZygncmVtb3ZlIGl0JykKICAgICAgICAgIGVuZFRoaXM9dHJ1ZTsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VuZE1hcERhdGFbYl0pCiAgICAgICAgICB0aGlzLnNlbmRNYXBEYXRhLnNwbGljZShiLCAxKTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0TmV3TWFwRGF0YScsT2JqZWN0LnZhbHVlcyh0aGlzLnNlbmRNYXBEYXRhKSkKICAgICAgICB9ZWxzZXsKICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGQgaXQnKQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZW5kVGhpcyl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIH0KCiAgICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oY2F0ZWdvcnkpCiAgICAgICAgLm9yZGVyQnkoJ2NyZWF0ZWRBdCcpLnN0YXJ0QXQodXNlRGF0ZXNbMF0pLmVuZEF0KHVzZURhdGVzWzFdKQogICAgICAgIC8vIC53aGVyZSgnY3JlYXRlZEF0JwogICAgICAgIC8vICAgLCAnPT0nLCBEYXRlLnBhcnNlKCcyMDIwLTExLTE3IDAwOjAwOjAwLjAwMCcpKQogICAgICAgIC5nZXQoKQogICAgICAgIC50aGVuKChxdWVyeVNuYXBzaG90KSA9PiB7CiAgICAgICAgICBpZiAocXVlcnlTbmFwc2hvdC5lbXB0eSkgewogICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY29uc29sZS5sb2coJ2Nhbm5vdCBmaW5kJykKICAgICAgICAgICAgLy90aGlzLiRyb3V0ZXIucHVzaCgnL0hlbGxvV29ybGQnKQogICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgICBjb25zdCBjb2xsID0gW10KICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBkb2MKICAgICAgICAgICAgICAgY29uc3QgdXNpbmdEYXRlID0gbW9tZW50KGlkKS5mb3JtYXQoJ01NTSBEbyBZWScpCgogICAgICAgICAgICAgIGRvYy5kYXRhKClbJ2V2ZW50cyddLmZvckVhY2goKGRvYykgPT4gewogICAgICAgICAgICAgICAgdmFyIHRoZVRpbWUgPSBkb2MudGltZS5zZWNvbmRzKjEwMDAKICAgICAgICAgICAgICAgIHZhciBhVGltZSA9IHBhcnNlSW50IChtb21lbnQodGhlVGltZSkuZm9ybWF0KCdISCcpKQogICAgICAgICAgICAgICAgLy9yZW1vdmVkIGFnZSBjaGVjayBmb3Igbm93CiAgICAgICAgICAgICAgICAvL2lmIChkb2MuYWdlID49IHRoaXMubG93ZXJBZ2UgJiYgZG9jLmFnZSA8PSB0aGlzLnVwcGVyQWdlKXsKICAgICAgICAgICAgICAgICAgaWYgKGFUaW1lID49IHRoaXMubG93ZXJUaW1lICYmIGFUaW1lIDw9IHRoaXMudXBwZXJUaW1lKXsKICAgICAgICAgICAgICAgICAgICBjb2xsLnB1c2goeyBkb2MgfSkKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy99CiAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgdGVzdENvbGxlY3Rpb24ucHVzaCh7IFt1c2luZ0RhdGVdOiBjb2xsIH0pCgogICAgICAgICAgICB9KQoKICAgICAgICAgICAgLy90aGlzLmFsbFJlc3VsdHMgPSB0ZXN0Q29sbGVjdGlvbgogICAgICAgICAgICAvL2NvbnNvbGUubG9nICh0aGlzLmFsbFJlc3VsdHMpCiAgICAgICAgICAgIC8vdGhpcy5jcmVhdGVBcnJheXMoKQoKICAgICAgICAgIH0KCiAgICAgICAgfSkKCgoKICAgICAgYXdhaXQgdGhpcy5maWxsR3JvdXBDaGFydEFycmF5KHRlc3RDb2xsZWN0aW9uLCBjYXRlZ29yeSkKCiAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldE5ld01hcERhdGEnLE9iamVjdC52YWx1ZXModGhpcy5zZW5kTWFwRGF0YSkpCgogICAgfSwKCiAgICBhc3luYyBzZWFyY2hVc2Vyc0J5RW1haWwoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQogICAgICB0aGlzLm1lc3NhZ2UgPSAnJwogICAgICB0aGlzLmZvdW5kVXNlciA9IG51bGwKCiAgICAgIHRoaXMuY2hhbGxlbmdlTGlzdCA9IFtdCiAgICAgIHRoaXMuY2hhbGxlbmdlU01TTGlzdCA9IFtdCiAgICAgIHRoaXMuc2VjcmVMaXN0ID0gW10KICAgICAgdGhpcy5zZWNyZVNNU0xpc3QgPSBbXQogICAgICB0aGlzLnRpbWVyTGlzdCA9IFtdLAogICAgICB0aGlzLnRpbWVyU01TTGlzdCA9IFtdLAogICAgICB0aGlzLnVzZXJTTVNMaXN0ID0gW10sCiAgICAgIHRoaXMuem9uZUxpc3QgPSBbXSwKICAgICAgdGhpcy56b25lU01TTGlzdCA9IFtdLAogICAgICB0aGlzLmFsYXJtTGlzdCA9IFtdCgogICAgICB2YXIgbmV3TnVtYmVyOwogICAgICBpZiAodGhpcy5lbWFpbC5zdWJzdHJpbmcoMCwzKSE9Jys4OCcpewogICAgICAgIG5ld051bWJlciA9ICcrODgnK3RoaXMuZW1haWwKICAgICAgfWVsc2V7CiAgICAgICAgbmV3TnVtYmVyID0gdGhpcy5lbWFpbAogICAgICB9CgogICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRiCiAgICAgICAgLmNvbGxlY3Rpb24oJ3VzZXJzJykKICAgICAgICAud2hlcmUoJ3VzZXJQaG9uZScsICc9PScsIG5ld051bWJlcikKICAgICAgICAuZ2V0KCkKCiAgICAgIGlmICghc25hcHNob3QuZW1wdHkpIHsKICAgICAgICBjb25zdCB1c2VySWQgPSBzbmFwc2hvdC5kb2NzWzBdLmlkCiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBzbmFwc2hvdC5kb2NzWzBdLmRhdGEoKQoKICAgICAgICB0aGlzLmZvdW5kVXNlciA9IHsKICAgICAgICAgIGlkOiB1c2VySWQsCiAgICAgICAgICAuLi51c2VyRGF0YQogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModXNlcklkKS5nZXQoKQoKICAgICAgICBpZiAoZGJVc2VyICE9PSBudWxsKSB7CgogICAgICAgICAgY29uc3QgcXVlcnlVc2VyRGF0YSA9IGRiVXNlci5kYXRhKCkKCiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldFVzZXJEYXRhJywgewogICAgICAgICAgICBpZDogZGJVc2VyLmlkLAogICAgICAgICAgICBuYW1lOiBxdWVyeVVzZXJEYXRhLnVzZXJuYW1lLAogICAgICAgICAgICBlbWFpbDogcXVlcnlVc2VyRGF0YS5lbWFpbAoKICAgICAgICAgIH0pCgogICAgICAgICAgdGhpcy5zZWFyY2hVc2VyQW5kRGF0ZSh1c2VySWQpCgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnTk8gVVNFUicpCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVzc2FnZSA9ICdObyB1c2VyIHdpdGggdGhhdCBlbWFpbCBmb3VuZC4nCiAgICAgIH0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgfSwKCiAgICBnZXREYXRlcyhzdGFydERhdGUsIHN0b3BEYXRlKSB7CiAgICAgIHZhciBkYXRlQXJyYXkgPSBbXTsKICAgICAgdmFyIGN1cnJlbnREYXRlID0gbW9tZW50KHN0YXJ0RGF0ZSk7CiAgICAgIHZhciBzdG9wRGF0ZSA9IG1vbWVudChzdG9wRGF0ZSk7CiAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBzdG9wRGF0ZSkgewogICAgICAgICAgZGF0ZUFycmF5LnB1c2goIG1vbWVudChjdXJyZW50RGF0ZSkuZm9ybWF0KCdNTU0gRG8gWVknKSApCiAgICAgICAgICBjdXJyZW50RGF0ZSA9IG1vbWVudChjdXJyZW50RGF0ZSkuYWRkKDEsICdkYXlzJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGVBcnJheTsKICAgIH0sCiAgICBhc3luYyBzZWFyY2hVc2VyQW5kRGF0ZSh1aWQpIHsKICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGVzWzBdICsgJyAwMDowMDowMC4wMDAnKQoKICAgICAgY29uc3QgZnVsbERhdGUxID0gRGF0ZS5wYXJzZSh0aGlzLmRhdGVzWzBdKQogICAgICBjb25zdCBmdWxsRGF0ZTIgPSBEYXRlLnBhcnNlKHRoaXMuZGF0ZXNbMV0pCgogICAgICBpZiAodGhpcy5kYXRlc1swXT09bnVsbCl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRhdGVzWzFdPT1udWxsKXsKICAgICAgICB0aGlzLmRhdGVzWzFdPXRoaXMuZGF0ZXNbMF0KICAgICAgfQoKICAgICAgY29uc3QgdXNlRGF0ZXMgPSBbXQoKICAgICAgaWYgKGZ1bGxEYXRlMSA8IGZ1bGxEYXRlMikgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICB9IGVsc2UgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nICh1c2VEYXRlcykKCiAgICAgIHRoaXMuYWxsU2VhcmNoRGF0ZXMgID0gdGhpcy5nZXREYXRlcyh1c2VEYXRlc1swXSwgdXNlRGF0ZXNbMV0pCgoKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXREYXRlcycsdGhpcy5hbGxTZWFyY2hEYXRlcyApCgoKCiAgICAgIGNvbnN0IHRlc3RDb2xsZWN0aW9uID0gW10KICAgICAgLy9jb250ZXh0LmNvbW1pdCgiU0VUX01BVENIRVMiLCBjYXRlZ29yaWVzKQoKICAgICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModWlkKQogICAgICAgIC5jb2xsZWN0aW9uKCdldmVudHMnKQogICAgICAgIC5vcmRlckJ5KCdjcmVhdGVkQXQnKS5zdGFydEF0KHVzZURhdGVzWzBdKS5lbmRBdCh1c2VEYXRlc1sxXSkKICAgICAgICAvLyAud2hlcmUoJ2NyZWF0ZWRBdCcKICAgICAgICAvLyAgICwgJz09JywgRGF0ZS5wYXJzZSgnMjAyMC0xMS0xNyAwMDowMDowMC4wMDAnKSkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5ub3QgZmluZCcpCiAgICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goJy9IZWxsb1dvcmxkJykKICAgICAgICAgIH0gZWxzZSB7CgogICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbGwgPSBbXQogICAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IGRvYwoKICAgICAgICAgICAgICBkb2MuZGF0YSgpWydldmVudHMnXS5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgICAgIHZhciB0aGVUaW1lID0gZG9jLnRpbWUuc2Vjb25kcyoxMDAwCiAgICAgICAgICAgICAgICB2YXIgYVRpbWUgPSBwYXJzZUludCAobW9tZW50KHRoZVRpbWUpLmZvcm1hdCgnSEgnKSkKICAgICAgICAgICAgICAgIGlmIChhVGltZSA+PSB0aGlzLmxvd2VyVGltZSAmJiBhVGltZSA8PSB0aGlzLnVwcGVyVGltZSl7CiAgICAgICAgICAgICAgICAgIGNvbGwucHVzaCh7IGRvYyB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIHRlc3RDb2xsZWN0aW9uLnB1c2goeyBbaWRdOiBjb2xsIH0pCgogICAgICAgICAgICB9KQoKICAgICAgICAgICAgdGhpcy5hbGxSZXN1bHRzID0gdGVzdENvbGxlY3Rpb24KICAgICAgICAgICAgdGhpcy5jcmVhdGVBcnJheXMoKQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgfSwKICAgIGFzeW5jIGNyZWF0ZUFycmF5cygpewoKICAgIHRoaXMuYWxsUmVzdWx0cy5mb3JFYWNoKGRvYz0+ewogICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkb2MpKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgTkVXICR7a2V5fTogJHt2YWx1ZX1gKQoKICAgICAgICAgICAgdmFyIHRoZUtleT1rZXkKCiAgICAgICAgICAgIGZvciAoY29uc3QgW2FrZXksIGF2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZG9jW3RoZUtleV0pKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtha2V5fTogJHthdmFsdWV9YCkKICAgICAgICAgICAgICAgIGNvbnN0IHVzaW5nRGF0ZSA9IG1vbWVudChhdmFsdWVbJ2RvYyddWyd0aW1lJ10udG9EYXRlKCkpLmZvcm1hdCgnTU1NIERvIFlZJykKCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNpbmdEYXRlKTsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWx1ZVsnZG9jJ11bJ2NhdGVnb3J5J10pIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2UnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYWxsZW5nZUxpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmNoYWxsZW5nZUxpc3QucHVzaChhdmFsdWVbJ2RvYyddKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2Utc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFsbGVuZ2VTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlY3JldCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjcmV0TGlzdC5wdXNoKHsgW3VzaW5nRGF0ZV0gOmF2YWx1ZVsnZG9jJ119KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdzZWNyZXQtc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWNyZXRTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWVyJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lckxpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGltZXItc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lclNNU0xpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAndXNlci1zbXMnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvbmUnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmVMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvbmVzLXNtcyc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9uZVNNU0xpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxhcm0nOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsYXJtTGlzdC5wdXNoKHsgW3VzaW5nRGF0ZV0gOmF2YWx1ZVsnZG9jJ119KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgIH0pCgogICAgdGhpcy5zZWxlY3RDaGFydENvbHVtbnMoKQoKICB9LAoKICBhc3luYyBzZWxlY3RDaGFydENvbHVtbnMoKXsKCgogICAgdGhpcy5zZW5kTWFwRGF0YT1bXQoKICAgIGNvbnNvbGUubG9nKHRoaXMuYWxhcm1MaXN0KQoKIGlmICh0aGlzLmNoYWxsZW5nZUxpc3QubGVuZ3RoPjAgJiYgdGhpcy5jaGFsbGVuZ2VDaGVjayl7CiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy5jaGFsbGVuZ2VMaXN0LCAnQ2hhbGxlbmdlJykKICAgIH0KCiAgICBpZiAodGhpcy5jaGFsbGVuZ2VTTVNMaXN0Lmxlbmd0aD4wICYmIHRoaXMuY2hhbGxlbmdlU01TQ2hlY2spewogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMuY2hhbGxlbmdlU01TTGlzdCwgJ0NoYWxsZW5nZSBTTVMnKQogICAgfQoKICAgIGlmICh0aGlzLnNlY3JldExpc3QubGVuZ3RoPjAgJiYgdGhpcy5zZWNyZXRDaGVjayl7CiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy5zZWNyZXRMaXN0LCAnU2VjcmV0JykKICAgIH0KCiAgICBpZiAodGhpcy5zZWNyZXRTTVNMaXN0Lmxlbmd0aD4wICYmIHRoaXMuc2VjcmV0U01TQ2hlY2spewogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMuc2VjcmV0U01TTGlzdCwgJ1NlY3JldCBTTVMnKQogICAgfQoKICAgIGlmICh0aGlzLnRpbWVyTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnRpbWVyQ2hlY2spewogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMudGltZXJMaXN0LCAnVGltZXInKQogICAgfQoKICAgIGlmICh0aGlzLnRpbWVyU01TTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnRpbWVyU01TQ2hlY2spewogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMudGltZXJTTVNMaXN0LCAnVGltZXIgU01TJykKICAgIH0KCiAgICBpZiAodGhpcy56b25lTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnpvbmVDaGVjayl7CiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy56b25lTGlzdCwgJ1pvbmUnKQogICAgfQoKICAgIGlmICh0aGlzLnpvbmVTTVNMaXN0Lmxlbmd0aD4wICYmIHRoaXMuIHpvbmVTTVNDaGVjayl7CiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy56b25lU01TTGlzdCwgJ1pvbmUgU01TJykKICAgIH0KCiAgICBpZiAodGhpcy51c2VyU01TTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnVzZXJTTVNDaGVjayl7CiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy51c2VyU01TTGlzdCwgJ1VzZXIgU01TJykKICAgIH0KCiAgICBpZiAodGhpcy5hbGFybUxpc3QubGVuZ3RoPjAgJiYgdGhpcy5hbGFybUNoZWNrKXsKICAgICAgYXdhaXQgdGhpcy5maWxsQ2hhcnRBcnJheSh0aGlzLmFsYXJtTGlzdCwgJ0FsYXJtJykKICAgIH0KCiAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXROZXdNYXBEYXRhJyxPYmplY3QudmFsdWVzKHRoaXMuc2VuZE1hcERhdGEpKQoKICB9LAoKICBhc3luYyBmaWxsQ2hhcnRBcnJheShjcmVhdGVkTGlzdCwgY2F0ZWdvcnkpewoKICAgIHZhciB0YWJ1bGF0ZWRMaXN0ID0ge30KCiAgICBmb3IgKHZhciB0PTA7IHQ8dGhpcy5hbGxTZWFyY2hEYXRlcy5sZW5ndGg7IHQrKyl7CiAgICAgIE9iamVjdC5hc3NpZ24odGFidWxhdGVkTGlzdCwge1t0aGlzLmFsbFNlYXJjaERhdGVzW3RdXTogMH0pOwogICAgfQoKICAgIGZvciAodmFyIGk9MDsgaTxjcmVhdGVkTGlzdC5sZW5ndGg7IGkrKyl7CiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjcmVhdGVkTGlzdFtpXSkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBORVcgJHtrZXl9OiAke3ZhbHVlfWApCiAgICAgICAgICBjb25zb2xlLmxvZyh2YWx1ZS5sb2NhdGlvbi5sYXRpdHVkZSkKICAgICAgICAgIHZhciBsYXQgPSB2YWx1ZS5sb2NhdGlvbi5sYXRpdHVkZQogICAgICAgICAgdmFyIGxvbmcgPSB2YWx1ZS5sb2NhdGlvbi5sb25naXR1ZGUKICAgICAgICAgIHZhciBpbmZvID0gdmFsdWUuY2F0ZWdvcnkKICAgICAgICAgIHZhciB1c2VJY29uID0gdGhpcy5tYXBJY29uc1t2YWx1ZS5jYXRlZ29yeV0KICAgICAgICAgIGNvbnNvbGUubG9nKCdNUFBQUCAnK3VzZUljb24pCgogICAgICAgICAgICB0aGlzLnNlbmRNYXBEYXRhLnB1c2goCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgICAgICBsbmc6IGxvbmcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbmZvVGV4dDogaW5mbywKICAgICAgICAgICAgICAgIGljb246IHVzZUljb24KICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgfQogICAgfQoKICBjb25zb2xlLmxvZyh0YWJ1bGF0ZWRMaXN0KQoKICAgIC8vYXdhaXQgdGhpcy5zZW5kTWFwRGF0YS5wdXNoKHtuYW1lOiBjYXRlZ29yeSwgZGF0YTogT2JqZWN0LnZhbHVlcyh0YWJ1bGF0ZWRMaXN0KX0pCgogICAgcmV0dXJuCiAgfSwKCiAgYXN5bmMgZmlsbEdyb3VwQ2hhcnRBcnJheShjcmVhdGVkTGlzdCwgY2F0ZWdvcnkpewoKICAgIHZhciB0YWJ1bGF0ZWRMaXN0ID0ge30KICAgIHZhciBmb3JNYXA9e30KCiAgICBmb3IgKHZhciB0PTA7IHQ8dGhpcy5hbGxTZWFyY2hEYXRlcy5sZW5ndGg7IHQrKyl7CiAgICAgIE9iamVjdC5hc3NpZ24odGFidWxhdGVkTGlzdCwge1t0aGlzLmFsbFNlYXJjaERhdGVzW3RdXTogMH0pOwogICAgfQoKICAgIGZvciAodmFyIGk9MDsgaTxjcmVhdGVkTGlzdC5sZW5ndGg7IGkrKyl7CiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhjcmVhdGVkTGlzdFtpXSkpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBORVcgJHtrZXl9OiAke3ZhbHVlfWApCgogICAgICAgICAgdGFidWxhdGVkTGlzdFtrZXldID0gdmFsdWUubGVuZ3RoCgogICAgICAgICAgLy9nZXQgdmFsdWVzIGJlbG93IGUuZy4gbWFwIGxvY2F0aW9ucwoKICAgICAgICAgIGZvciAodmFyIHY9MDsgdjx2YWx1ZS5sZW5ndGg7IHYrKyl7CiAgICAgICAgICAgIHZhciBnZW8gPSB2YWx1ZVt2XVsnZG9jJ11bJ2xvY2F0aW9uJ10KICAgICAgICAgICAgdmFyIGxhdCA9IGdlby5sYXRpdHVkZQogICAgICAgICAgICB2YXIgbG9uZyA9IGdlby5sb25naXR1ZGUKICAgICAgICAgICAgdmFyIGluZm8gPSB2YWx1ZVt2XVsnZG9jJ11bJ2NhdGVnb3J5J10KCiAgICAgICAgICAgIHZhciB1c2VJY29uID0gdGhpcy5tYXBJY29uc1t2YWx1ZVt2XVsnZG9jJ11bJ2NhdGVnb3J5J11dCgogICAgICAgICAgICB0aGlzLnNlbmRNYXBEYXRhLnB1c2goCiAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgcG9zaXRpb246IHsKICAgICAgICAgICAgICAgICAgbGF0OiBsYXQsCiAgICAgICAgICAgICAgICBsbmc6IGxvbmcKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBpbmZvVGV4dDogaW5mbywKICAgICAgICAgICAgICAgaWNvbiA6IHVzZUljb24KICAgICAgICAgICAgICB9LAogICAgICAgICAgICApCiAgICAgICAgICAgIC8vY29uc29sZS5sb2cgKGdlby5sYXRpdHVkZSkKICAgICAgICAgIH0KCiAgICAgICAgfQogICAgfQoKICAvL2NvbnNvbGUubG9nKHRhYnVsYXRlZExpc3QpCgogICAvLyBhd2FpdCB0aGlzLnNlbmRNYXBEYXRhLnB1c2goe25hbWU6IGNhdGVnb3J5LCBkYXRhOiBPYmplY3QudmFsdWVzKHRhYnVsYXRlZExpc3QpfSkKCiAgICByZXR1cm4KICB9CgoKCiAgfQp9Cg=="},null]}