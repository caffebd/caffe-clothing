{"remainingRequest":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/DashboardPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luke/Documents/VUE/bt-starter/src/pages/dashboard/DashboardPage.vue","mtime":1606635182004},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luke/Documents/VUE/bt-starter/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgovLyBERU1PIENhcmRzIGZvciBkYXNoYm9hcmQKLy9pbXBvcnQgU2FsZXNDYXJkIGZyb20gJy4uLy4uL2NvbXBvbmVudHMvZGFzaGJvYXJkL0luYm94Q2FyZCcKaW1wb3J0IENvbHVtbkNhcmQgZnJvbSAnLi4vLi4vcGFnZXMvdWkvY2hhcnRzL19leGFtcGxlcy9hcGV4LWNoYXJ0cy9zaW1wbGUvY29sdW1uJwppbXBvcnQgUGllQ2FyZCBmcm9tICcuLi8uLi9wYWdlcy91aS9jaGFydHMvX2V4YW1wbGVzL2VjaGFydHMvcGllJwppbXBvcnQgeyBkYiB9IGZyb20gJy4uLy4uL21haW4nCmltcG9ydCBtb21lbnQgZnJvbSAnbW9tZW50JwppbXBvcnQgZmlyZWJhc2UgZnJvbSAnZmlyZWJhc2UnCmNvbnN0IHF1ZXJ5ID0gZGIuY29sbGVjdGlvbigndXNlcnMnKQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvbHVtbkNhcmQsCiAgICBQaWVDYXJkCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnRUYWJzOlsnbmEnLCdCYXIgQ2hhcnQnLCAnUGllIENoYXJ0J10sCiAgICAgIHRpbWVtaW46IDAsCiAgICAgIHRpbWVtYXg6IDI0LAogICAgICB0aW1lcmFuZ2U6IFswLCAyNF0sCiAgICAgIG1heDo5OSwKICAgICAgbWluOjAsCiAgICAgIHRhYnM6bnVsbCwKICAgICAgcmFuZ2U6WzAsOTldLAogICAgICBmb3JtOiBmYWxzZSwKICAgICAgbW9kZTpmYWxzZSwKICAgICAgY2hhcnRUeXBlOidHcm91cCcsCiAgICAgIGxvYWRpbmdJbnRlcnZhbDogbnVsbCwKICAgICAgZW1haWw6ICcnLAogICAgICBmb3VuZFVzZXI6IG51bGwsCiAgICAgIGlzTG9hZGluZzE6IHRydWUsCiAgICAgIGZyb21EYXRlTWVudTogZmFsc2UsCiAgICAgIGZyb21EYXRlVmFsOiBudWxsLAogICAgICBkYXRlczpbXSwKICAgICAgbW9kYWw6IGZhbHNlLAogICAgICBtaW5EYXRlOiAnMjAxOS0wNy0wNCcsCiAgICAgIG1heERhdGU6ICcyMDMwLTA4LTMwJywKICAgICAgYWxsU2VhcmNoRGF0ZXM6IFtdLAogICAgICBhbGxSZXN1bHRzOiBbXSwKICAgICAgY2hhbGxlbmdlTGlzdDpbXSwKICAgICAgY2hhbGxlbmdlU01TTGlzdDpbXSwKICAgICAgc2VjcmV0TGlzdDpbXSwKICAgICAgc2VjcmV0U01TTGlzdDpbXSwKICAgICAgdGltZXJMaXN0OltdLAogICAgICB0aW1lclNNU0xpc3Q6W10sCiAgICAgIHVzZXJTTVNMaXN0OltdLAogICAgICB6b25lTGlzdDpbXSwKICAgICAgem9uZVNNU0xpc3Q6W10sCiAgICAgIGFsYXJtTGlzdDpbXSwKICAgICAgc2VuZEJhckRhdGE6IFtdLAogICAgICBzZW5kUGllRGF0YTpbXSwKICAgICAgc2VsZWN0Q2hhbGxlbmdlOiB0cnVlLAogICAgICBzZWxlY3RDaGFsbGVuZ2VTTVM6dHJ1ZSwKICAgICAgc2VsZWN0U2VjcmV0OnRydWUsCiAgICAgIHNlbGVjdFNlY3JldFNNUzpmYWxzZSwKICAgICAgc2VsZWN0VGltZXI6dHJ1ZSwKICAgICAgc2VsZWN0VGltZXJTTVM6dHJ1ZSwKICAgICAgc2VsZWN0Wm9uZTpmYWxzZSwKICAgICAgc2VsZWN0Wm9uZVNNUzpmYWxzZSwKICAgICAgc2VsZWN0VXNlclNNUzp0cnVlLAogICAgICBzZWxlY3RBbGFybTp0cnVlLAoKICAgICAgZ3JvdXBDaGFsbGVuZ2VDb3VudDowLAogICAgICBncm91cENoYWxsZW5nZVNNU0NvdW50OjAsCiAgICAgIGdyb3VwU2VjcmV0Q291bnQ6MCwKICAgICAgZ3JvdXBTZWNyZXRTTVNDb3VudDowLAogICAgICBncm91cFRpbWVyQ291bnQ6MCwKICAgICAgZ3JvdXBUaW1lclNNU0NvdW50OjAsCiAgICAgIGdyb3VwWm9uZUNvdW50OjAsCiAgICAgIGdyb3VwWm9uZVNNU0NvdW50OjAsCiAgICAgIGdyb3VwVXNlclNNU0NvdW50OjAsCiAgICAgIGdyb3VwQWxhcm1Db3VudDowLAoKICAgICAgY2hhbGxlbmdlQ2hlY2s6ZmFsc2UsCiAgICAgIGNoYWxsZW5nZVNNU0NoZWNrOmZhbHNlLAogICAgICBzZWNyZXRDaGVjazpmYWxzZSwKICAgICAgc2VjcmV0U01TQ2hlY2s6ZmFsc2UsCiAgICAgIHRpbWVyQ2hlY2s6ZmFsc2UsCiAgICAgIHRpbWVyU01TQ2hlY2s6ZmFsc2UsCiAgICAgIHpvbmVDaGVjazpmYWxzZSwKICAgICAgem9uZVNNU0NoZWNrOmZhbHNlLAogICAgICB1c2VyU01TQ2hlY2s6ZmFsc2UsCiAgICAgIGFsYXJtQ2hlY2s6ZmFsc2UsCgogICAgICBsb3dlckFnZToxLAogICAgICB1cHBlckFnZTo5OSwKCiAgICAgIGxvd2VyVGltZTowLAogICAgICB1cHBlclRpbWU6MjQsCgogICAgICBhY3RpdmVDaGVja0JveGVzOltdCgoKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICBsZXQgY291bnQgPSAwCgogICAgLy8gREVNTyBkZWxheSBmb3IgbG9hZGluZyBncmFwaGljcwogICAgdGhpcy5sb2FkaW5nSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIHRoaXNbYGlzTG9hZGluZyR7Y291bnQrK31gXSA9IGZhbHNlCiAgICAgIGlmIChjb3VudCA9PT0gNCkgdGhpcy5jbGVhcigpCiAgICB9LCA0MDApCiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5jbGVhcigpCiAgfSwKICBtZXRob2RzOiB7CiAgICBjbGVhckFsbENyaXRlcmlhKCl7CiAgICAgIHRoaXMuY2hhbGxlbmdlTGlzdCA9IFtdCiAgICAgIHRoaXMuY2hhbGxlbmdlU01TTGlzdCA9IFtdCiAgICAgIHRoaXMuc2VjcmV0TGlzdCA9IFtdCiAgICAgIHRoaXMuc2VjcmV0U01TTGlzdCA9IFtdCiAgICAgIHRoaXMudGltZXJMaXN0ID0gW10KICAgICAgdGhpcy50aW1lclNNU0xpc3QgPSBbXQogICAgICB0aGlzLnVzZXJTTVNMaXN0ID0gW10KICAgICAgdGhpcy56b25lTGlzdCA9IFtdCiAgICAgIHRoaXMuem9uZVNNU0xpc3QgPSBbXQogICAgICB0aGlzLmFsYXJtTGlzdCA9IFtdCiAgICAgIHRoaXMuc2VuZEJhckRhdGEgPSBbXQogICAgICB0aGlzLnNlbmRQaWVEYXRhID0gW10KICAgICAgdGhpcy5jaGFsbGVuZ2VDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMuY2hhbGxlbmdlU01TQ2hlY2sgPSBmYWxzZQogICAgICB0aGlzLnNlY3JldENoZWNrID0gZmFsc2UKICAgICAgdGhpcy5zZWNyZXRTTVNDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMudGltZXJDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMudGltZXJTTVNDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMuem9uZUNoZWNrID0gZmFsc2UKICAgICAgdGhpcy56b25lU01TQ2hlY2sgPSBmYWxzZQogICAgICB0aGlzLnVzZXJTTVNDaGVjayA9IGZhbHNlCiAgICAgIHRoaXMuYWxhcm1DaGVjayA9IGZhbHNlCgogICAgICB0aGlzLmFjdGl2ZUNoZWNrQm94ZXM9W10KCgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldFBpZURhdGEnLHRoaXMuc2VuZFBpZURhdGEpCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0TmV3QmFyQ2hhcnREYXRhJyxPYmplY3QudmFsdWVzKHRoaXMuc2VuZEJhckRhdGEpKQogICAgfSwKICAgIHRvZ2dsZUNoYXJ0VHlwZShldmVudCl7CiAgICAgIGNvbnNvbGUubG9nKGV2ZW50KQogICAgICB0aGlzLmNsZWFyQWxsQ3JpdGVyaWEoKQogICAgICBpZiAoZXZlbnQ9PXRydWUpewogICAgICAgIHRoaXMuY2hhcnRUeXBlPSdJbmRpdmlkdWFsJwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmNoYXJ0VHlwZT0nR3JvdXAnCiAgICAgIH0KICAgIH0sCiAgICBjbGVhcigpIHsKICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmxvYWRpbmdJbnRlcnZhbCkKICAgIH0sCiAgICBjaGVja0JveFRlc3QodHlwZSl7CiAgICAgIGNvbnNvbGUubG9nKHR5cGUrJyAnK3RoaXMuY2hhbGxlbmdlQ2hlY2spCiAgICAgIGlmICh0aGlzLmFjdGl2ZUNoZWNrQm94ZXMuaW5jbHVkZXModHlwZSkpewogICAgICAgIHRoaXMuYWN0aXZlQ2hlY2tCb3hlcy5zcGxpY2UodGhpcy5hY3RpdmVDaGVja0JveGVzLmluZGV4T2YodHlwZSksIDEpOwogICAgICB9ZWxzZXsKICAgICAgICB0aGlzLmFjdGl2ZUNoZWNrQm94ZXMucHVzaCh0eXBlKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nICh0aGlzLmFjdGl2ZUNoZWNrQm94ZXMpCgogICAgaWYgKHRoaXMuY2hhcnRUeXBlPT0nR3JvdXAnKXsKICAgICAgdGhpcy5nZXRHcm91cERhdGEodHlwZSwgZmFsc2UpCiAgICB9ZWxzZXsKICAgICAgdGhpcy5zZWxlY3RDaGFydENvbHVtbnMoKQogICAgfQoKICAgIH0sCiAgICBkYXRlQ2hhbmdlZENoZWNrZXIoaSl7CgogICAgICBpZiAoaT09Mil7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIHRoaXMuc2VuZEJhckRhdGE9W10KICAgICAgdGhpcy5zZW5kUGllRGF0YT1bXQoKICAgIGlmICh0aGlzLmNoYXJ0VHlwZT09J0dyb3VwJyl7CgogICAgICBmb3IgKHZhciBkPTA7IGQ8dGhpcy5hY3RpdmVDaGVja0JveGVzLmxlbmd0aDsgZCsrKXsKICAgICAgICB0aGlzLmdldEdyb3VwRGF0YSh0aGlzLmFjdGl2ZUNoZWNrQm94ZXNbZF0sIHRydWUpCiAgICAgIH0KCiAgICB9ZWxzZXsKICAgICAgdGhpcy5zZWFyY2hVc2Vyc0J5RW1haWwoKQogICAgfQogICAgfSwKICAgIGNoYW5nZURhdGEoKSB7CgogICAgaWYgKHRoaXMuY2hhcnRUeXBlPT0nR3JvdXAnKXsKICAgICAgIHRoaXMuc2VsZWN0Q2hhbGxlbmdlU01TID0gZmFsc2UKICAgICAgIHRoaXMuc2VsZWN0Q2hhcnRDb2x1bW5zKCkKICAgIH1lbHNlewogICAgICB0aGlzLnNlYXJjaFVzZXJzQnlFbWFpbCgpCiAgICB9CgogICAgfSwKCiAgICBhc3luYyBzZXRUaW1lVXNlckV2ZW50c0RvY3MoKSB7CgogICAgICBsZXQgdXNlcklkTGlzdD1bXQogICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpLmdldCgpLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CgogICAgICAgIHVzZXJJZExpc3QucHVzaChkb2MucmVmLmlkKQogICAgICB9KQogICAgICB9KQoKICAgICAgIGNvbnNvbGUubG9nKHVzZXJJZExpc3QpCgogICAgICBmb3IgKHZhciBsPTA7IGw8dXNlcklkTGlzdC5sZW5ndGg7IGwrKyl7CgogICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VycyIpLmRvYyh1c2VySWRMaXN0W2xdKS5jb2xsZWN0aW9uKCdyZXNlYXJjaCcpLmdldCgpLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CgogICAgICBjb25zdCBzcGxpdFRpbWU9ZG9jLnJlZi5pZC5zcGxpdCgnICcpWzBdOwogICAgICBjb25zb2xlLmxvZyhzcGxpdFRpbWUpCiAgICAgIHZhciBwdXNoVGltZSA9IERhdGUucGFyc2Uoc3BsaXRUaW1lKQogICAgICAgIGRvYy5yZWYudXBkYXRlKHsKICAgICAgICAgIGNyZWF0ZWRBdDogcHVzaFRpbWUKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhtb21lbnQocHVzaFRpbWUpLmZvcm1hdCgnTU1NIERvIFlZJykpCgogICAgICB9KQoKICAgICAgfSkKICAgICAgfQoKICAgIH0sCiAgICBnZXRSYW5kb21JbnQobWF4KSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBNYXRoLmZsb29yKG1heCkrMTYpOwogICAgfSwKCiAgICBzZXRUaW1lQWxsRG9jcygpewogICAgICBkYi5jb2xsZWN0aW9uKCJ1c2VyLXNtcyIpLmdldCgpLnRoZW4oZnVuY3Rpb24ocXVlcnlTbmFwc2hvdCkgewogICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CiAgICAgIGNvbnN0IHNwbGl0VGltZT1kb2MucmVmLmlkLnNwbGl0KCcgJylbMF07CiAgICAgIGNvbnNvbGUubG9nKHNwbGl0VGltZSkKICAgICAgdmFyIHB1c2hUaW1lID0gRGF0ZS5wYXJzZShzcGxpdFRpbWUpCiAgICAgICAgZG9jLnJlZi51cGRhdGUoewogICAgICAgICAgY3JlYXRlZEF0OiBwdXNoVGltZQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKG1vbWVudChwdXNoVGltZSkuZm9ybWF0KCdNTU0gRG8gWVknKSkKICAgIH0pOwogICAgfSk7CiAgICB9LAogICAgc2V0RXZlbnRBZ2VzKCl7CiAgICAgIHZhciBjYXQ9J2FsYXJtJwogICAgICB2YXIgdGVtcD1bXQogICAgICBkYi5jb2xsZWN0aW9uKGNhdCkuZ2V0KCkudGhlbihmdW5jdGlvbihxdWVyeVNuYXBzaG90KSB7CiAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goZnVuY3Rpb24oZG9jKSB7CgogICAgICBjb25zb2xlLmxvZyhkb2MuZGF0YSgpWydldmVudHMnXSkKICAgICAgdGVtcC5wdXNoKGRvYy5kYXRhKClbJ2V2ZW50cyddKQoKICAgIH0pOwogICAgdmFyIG5ld1RlbXA7CiAgICBjb25zb2xlLmxvZyh0ZW1wLmxlbmd0aCkKICAgIGZvciAodmFyIHQ9MDsgdDx0ZW1wLmxlbmd0aDsgdCsrKXsKICAgICAgIG5ld1RlbXAgPSB0ZW1wW3RdCiAgICAgIGZvciAodmFyIHM9MDsgczxuZXdUZW1wLmxlbmd0aDsgcysrKXsKICAgICAgICB2YXIgcm5kQWdlID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogTWF0aC5mbG9vcigzMCkrMTYpCiAgICAgICAgbmV3VGVtcFtzXVsnYWdlJ109cm5kQWdlCiAgICAgIH0KCiAgICB9CiAgICBjb25zb2xlLmxvZyh0ZW1wKQogICAgdmFyIHA9MAogICAgZGIuY29sbGVjdGlvbihjYXQpLmdldCgpLnRoZW4oKHF1ZXJ5U25hcHNob3QpID0+IHsKICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICBkb2MucmVmLnVwZGF0ZSh7CiAgICAgICAgICBldmVudHM6IHRlbXBbcF0KICAgICAgICB9KTsKICAgICAgICBwKysKICAgICAgfSkKICAgIH0pCiAgICB9KTsKICAgIH0sCgoKCiAgICBhc3luYyBnZXRHcm91cERhdGEoY2F0ZWdvcnksIGZyb21EYXRlKXsKCgogICAgICBpZiAodGhpcy5kYXRlc1swXT09bnVsbCl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRhdGVzWzFdPT1udWxsKXsKICAgICAgICB0aGlzLmRhdGVzWzFdPXRoaXMuZGF0ZXNbMF0KICAgICAgfQoKICAgICAgY29uc3QgZnVsbERhdGUxID0gRGF0ZS5wYXJzZSh0aGlzLmRhdGVzWzBdKQogICAgICBjb25zdCBmdWxsRGF0ZTIgPSBEYXRlLnBhcnNlKHRoaXMuZGF0ZXNbMV0pCgogICAgICBjb25zb2xlLmxvZygnRkQgJytmdWxsRGF0ZTIpCgogICAgICBjb25zdCB1c2VEYXRlcyA9IFtdCgoKICAgICAgaWYgKGZ1bGxEYXRlMSA8IGZ1bGxEYXRlMikgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICB9IGVsc2UgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nICh1c2VEYXRlcykKCiAgICAgIHRoaXMuYWxsU2VhcmNoRGF0ZXMgID0gdGhpcy5nZXREYXRlcyh1c2VEYXRlc1swXSwgdXNlRGF0ZXNbMV0pCgogICAgICBjb25zb2xlLmxvZyh1c2VEYXRlc1sxXSkKCiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0RGF0ZXMnLHRoaXMuYWxsU2VhcmNoRGF0ZXMgKQoKICAgICAgICBjb25zdCB0ZXN0Q29sbGVjdGlvbiA9IFtdCiAgICAgIC8vY29udGV4dC5jb21taXQoIlNFVF9NQVRDSEVTIiwgY2F0ZWdvcmllcykKCiAgICAgIGlmICghZnJvbURhdGUpewogICAgICBmb3IgKHZhciBiPTA7IGI8dGhpcy5zZW5kQmFyRGF0YS5sZW5ndGg7IGIrKyl7CiAgICAgICAgaWYgKHRoaXMuc2VuZEJhckRhdGFbYl1bJ25hbWUnXT09Y2F0ZWdvcnkpewogICAgICAgICAgY29uc29sZS5sb2coJ3JlbW92ZSBpdCcpCiAgICAgICAgICAvL3RoaXMuc2VuZEJhckRhdGEgPSBbXQogICAgICAgICAgdGhpcy5zZW5kQmFyRGF0YS5zcGxpY2UoYiwgMSk7CiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldE5ld0JhckNoYXJ0RGF0YScsT2JqZWN0LnZhbHVlcyh0aGlzLnNlbmRCYXJEYXRhKSkKCiAgICAgICAgICAgICAgZm9yICh2YXIgcD0wOyBwPHRoaXMuc2VuZFBpZURhdGEubGVuZ3RoOyBwKyspewogICAgICAgICAgICAgIGlmICh0aGlzLnNlbmRQaWVEYXRhW3BdWyduYW1lJ109PWNhdGVnb3J5KXsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmUgaXQgcGllJykKICAgICAgICAgICAgICAgIC8vdGhpcy5zZW5kQmFyRGF0YSA9IFtdCiAgICAgICAgICAgICAgICB0aGlzLnNlbmRQaWVEYXRhLnNwbGljZShwLCAxKTsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0UGllRGF0YScsdGhpcy5zZW5kUGllRGF0YSkKCiAgICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIGl0IHBpZScpCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgIHJldHVybgogICAgICAgIH1lbHNlewogICAgICAgICAgY29uc29sZS5sb2coJ2FkZCBpdCcpCiAgICAgICAgfQogICAgICB9CgogICAgICB9CgogICAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKGNhdGVnb3J5KQogICAgICAgIC5vcmRlckJ5KCdjcmVhdGVkQXQnKS5zdGFydEF0KHVzZURhdGVzWzBdKS5lbmRBdCh1c2VEYXRlc1sxXSkKICAgICAgICAvLyAgICwgJz09JywgRGF0ZS5wYXJzZSgnMjAyMC0xMS0xNyAwMDowMDowMC4wMDAnKSkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5ub3QgZmluZCcpCiAgICAgICAgICAgIC8vdGhpcy4kcm91dGVyLnB1c2goJy9IZWxsb1dvcmxkJykKICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgIHZhciB0b3RhbENvdW50ID0gMDsKICAgICAgICAgICAgICBxdWVyeVNuYXBzaG90LmZvckVhY2goKGRvYykgPT4gewogICAgICAgICAgICAgIGNvbnN0IGNvbGwgPSBbXQogICAgICAgICAgICAgIGNvbnN0IHsgaWQgfSA9IGRvYwogICAgICAgICAgICAgIGNvbnN0IHVzaW5nRGF0ZSA9IG1vbWVudChpZCkuZm9ybWF0KCdNTU0gRG8gWVknKQoKICAgICAgICAgICAgICBkb2MuZGF0YSgpWydldmVudHMnXS5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgICAgIHZhciB0aGVUaW1lID0gZG9jLnRpbWUuc2Vjb25kcyoxMDAwCiAgICAgICAgICAgICAgICB2YXIgYVRpbWUgPSBwYXJzZUludCAobW9tZW50KHRoZVRpbWUpLmZvcm1hdCgnSEgnKSkKICAgICAgICAgICAgICAgIC8vcmVtb3ZlZCBhZ2UgY2hlY2sgZm9yIG5vdwogICAgICAgICAgICAgICAgLy9pZiAoZG9jLmFnZSA+PSB0aGlzLmxvd2VyQWdlICYmIGRvYy5hZ2UgPD0gdGhpcy51cHBlckFnZSl7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMudGltZXJhbmdlWzBdICsnICAgJyt0aGlzLnRpbWVyYW5nZVsxXSkKICAgICAgICAgICAgICAgICAgaWYgKGFUaW1lID49IHRoaXMudGltZXJhbmdlWzBdICYmIGFUaW1lIDw9IHRoaXMudGltZXJhbmdlWzFdKXsKICAgICAgICAgICAgICAgICAgICBjb2xsLnB1c2goeyBkb2MgfSkKICAgICAgICAgICAgICAgICAgICB0b3RhbENvdW50Kys7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIHRlc3RDb2xsZWN0aW9uLnB1c2goeyBbdXNpbmdEYXRlXTogY29sbCB9KQoKICAgICAgICAgICAgfSkKICAgICAgICAgICAgIGNvbnNvbGUubG9nIChjYXRlZ29yeSArJyAgJyt0b3RhbENvdW50KQogICAgICAgICAgICAgdGhpcy5zZW5kUGllRGF0YS5wdXNoKHt2YWx1ZTogdG90YWxDb3VudCwgbmFtZTogY2F0ZWdvcnl9KQogICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXRQaWVEYXRhJywgdGhpcy5zZW5kUGllRGF0YSkKCiAgICAgICAgICB9CgogICAgICAgIH0pCgogICAgICBhd2FpdCB0aGlzLmZpbGxHcm91cENoYXJ0QXJyYXkodGVzdENvbGxlY3Rpb24sIGNhdGVnb3J5KQoKICAgICAgICAgY29uc29sZS5sb2codGhpcy5zZW5kQmFyRGF0YSkKICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0TmV3QmFyQ2hhcnREYXRhJyxPYmplY3QudmFsdWVzKHRoaXMuc2VuZEJhckRhdGEpKQoKICAgIH0sCgogICAgYXN5bmMgc2VhcmNoVXNlcnNCeUVtYWlsKCkgewoKY29uc29sZS5sb2coICAnc2VhcmNoIHVzZXInKQoKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlCiAgICAgIHRoaXMubWVzc2FnZSA9ICcnCiAgICAgIHRoaXMuZm91bmRVc2VyID0gbnVsbAoKICAgICAgdGhpcy5jaGFsbGVuZ2VMaXN0ID0gW10KICAgICAgdGhpcy5jaGFsbGVuZ2VTTVNMaXN0ID0gW10KICAgICAgdGhpcy5zZWNyZXRMaXN0ID0gW10KICAgICAgdGhpcy5zZWNyZXRTTVNMaXN0ID0gW10KICAgICAgdGhpcy50aW1lckxpc3QgPSBbXSwKICAgICAgdGhpcy50aW1lclNNU0xpc3QgPSBbXSwKICAgICAgdGhpcy51c2VyU01TTGlzdCA9IFtdLAogICAgICB0aGlzLnpvbmVMaXN0ID0gW10sCiAgICAgIHRoaXMuem9uZVNNU0xpc3QgPSBbXSwKICAgICAgdGhpcy5hbGFybUxpc3QgPSBbXSwKICAgICAgdGhpcy5zZW5kQmFyRGF0YSA9IFtdLAogICAgICB0aGlzLnNlbmRQaWVEYXRhID0gW10KCiAgICAgIHZhciBuZXdOdW1iZXI7CiAgICAgIGlmICh0aGlzLmVtYWlsLnN1YnN0cmluZygwLDMpIT0nKzg4Jyl7CiAgICAgICAgbmV3TnVtYmVyID0gJys4OCcrdGhpcy5lbWFpbAogICAgICB9ZWxzZXsKICAgICAgICBuZXdOdW1iZXIgPSB0aGlzLmVtYWlsCiAgICAgIH0KCgogICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGRiCiAgICAgICAgLmNvbGxlY3Rpb24oJ3VzZXJzJykKICAgICAgICAud2hlcmUoJ3VzZXJQaG9uZScsICc9PScsIG5ld051bWJlcikKICAgICAgICAuZ2V0KCkKCiAgICAgIGlmICghc25hcHNob3QuZW1wdHkpIHsKICAgICAgICBjb25zdCB1c2VySWQgPSBzbmFwc2hvdC5kb2NzWzBdLmlkCiAgICAgICAgY29uc3QgdXNlckRhdGEgPSBzbmFwc2hvdC5kb2NzWzBdLmRhdGEoKQoKICAgICAgICB0aGlzLmZvdW5kVXNlciA9IHsKICAgICAgICAgIGlkOiB1c2VySWQsCiAgICAgICAgICAuLi51c2VyRGF0YQogICAgICAgIH0KCiAgICAgICAgY29uc3QgZGJVc2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModXNlcklkKS5nZXQoKQoKICAgICAgICBpZiAoZGJVc2VyICE9PSBudWxsKSB7CgogICAgICAgICAgY29uc3QgcXVlcnlVc2VyRGF0YSA9IGRiVXNlci5kYXRhKCkKCiAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldFVzZXJEYXRhJywgewogICAgICAgICAgICBpZDogZGJVc2VyLmlkLAogICAgICAgICAgICBuYW1lOiBxdWVyeVVzZXJEYXRhLnVzZXJuYW1lLAogICAgICAgICAgICBlbWFpbDogcXVlcnlVc2VyRGF0YS5lbWFpbAoKICAgICAgICAgIH0pCgogICAgICAgICAgdGhpcy5zZWFyY2hVc2VyQW5kRGF0ZSh1c2VySWQpCgogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnTk8gVVNFUicpCiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMubWVzc2FnZSA9ICdObyB1c2VyIHdpdGggdGhhdCBlbWFpbCBmb3VuZC4nCiAgICAgIH0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQogICAgfSwKCiAgICBnZXREYXRlcyhzdGFydERhdGUsIHN0b3BEYXRlKSB7CiAgICAgIHZhciBkYXRlQXJyYXkgPSBbXTsKICAgICAgdmFyIGN1cnJlbnREYXRlID0gbW9tZW50KHN0YXJ0RGF0ZSk7CiAgICAgIHZhciBzdG9wRGF0ZSA9IG1vbWVudChzdG9wRGF0ZSk7CiAgICAgIHdoaWxlIChjdXJyZW50RGF0ZSA8PSBzdG9wRGF0ZSkgewogICAgICAgICAgZGF0ZUFycmF5LnB1c2goIG1vbWVudChjdXJyZW50RGF0ZSkuZm9ybWF0KCdNTU0gRG8gWVknKSApCiAgICAgICAgICBjdXJyZW50RGF0ZSA9IG1vbWVudChjdXJyZW50RGF0ZSkuYWRkKDEsICdkYXlzJyk7CiAgICAgIH0KICAgICAgcmV0dXJuIGRhdGVBcnJheTsKICAgIH0sCiAgICBhc3luYyBzZWFyY2hVc2VyQW5kRGF0ZSh1aWQpIHsKICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGVzWzBdICsgJyAwMDowMDowMC4wMDAnKQoKICAgICAgY29uc3QgZnVsbERhdGUxID0gRGF0ZS5wYXJzZSh0aGlzLmRhdGVzWzBdKQogICAgICBjb25zdCBmdWxsRGF0ZTIgPSBEYXRlLnBhcnNlKHRoaXMuZGF0ZXNbMV0pCgogICAgICBpZiAodGhpcy5kYXRlc1swXT09bnVsbCl7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmRhdGVzWzFdPT1udWxsKXsKICAgICAgICB0aGlzLmRhdGVzWzFdPXRoaXMuZGF0ZXNbMF0KICAgICAgfQoKICAgICAgY29uc3QgdXNlRGF0ZXMgPSBbXQoKICAgICAgaWYgKGZ1bGxEYXRlMSA8IGZ1bGxEYXRlMikgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICB9IGVsc2UgewogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUyKQogICAgICAgIHVzZURhdGVzLnB1c2goZnVsbERhdGUxKQogICAgICB9CiAgICAgIGNvbnNvbGUubG9nICh1c2VEYXRlcykKCiAgICAgIHRoaXMuYWxsU2VhcmNoRGF0ZXMgID0gdGhpcy5nZXREYXRlcyh1c2VEYXRlc1swXSwgdXNlRGF0ZXNbMV0pCgogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldERhdGVzJyx0aGlzLmFsbFNlYXJjaERhdGVzICkKCiAgICAgIGNvbnN0IHRlc3RDb2xsZWN0aW9uID0gW10KICAgICAgLy9jb250ZXh0LmNvbW1pdCgiU0VUX01BVENIRVMiLCBjYXRlZ29yaWVzKQoKICAgICAgZGIuY29sbGVjdGlvbigndXNlcnMnKS5kb2ModWlkKQogICAgICAgIC5jb2xsZWN0aW9uKCdldmVudHMnKQogICAgICAgIC5vcmRlckJ5KCdjcmVhdGVkQXQnKS5zdGFydEF0KHVzZURhdGVzWzBdKS5lbmRBdCh1c2VEYXRlc1sxXSkKICAgICAgICAvLyAud2hlcmUoJ2NyZWF0ZWRBdCcKICAgICAgICAvLyAgICwgJz09JywgRGF0ZS5wYXJzZSgnMjAyMC0xMS0xNyAwMDowMDowMC4wMDAnKSkKICAgICAgICAuZ2V0KCkKICAgICAgICAudGhlbigocXVlcnlTbmFwc2hvdCkgPT4gewogICAgICAgICAgaWYgKHF1ZXJ5U25hcHNob3QuZW1wdHkpIHsKICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjYW5ub3QgZmluZCcpCiAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncXVlcnl1c2VyL3NldE5ld0JhckNoYXJ0RGF0YScsT2JqZWN0LnZhbHVlcyh0aGlzLnNlbmRCYXJEYXRhKSkKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdxdWVyeXVzZXIvc2V0UGllRGF0YScsIHRoaXMuc2VuZFBpZURhdGEpCgogICAgICAgICAgICAvL3RoaXMuJHJvdXRlci5wdXNoKCcvSGVsbG9Xb3JsZCcpCiAgICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgcXVlcnlTbmFwc2hvdC5mb3JFYWNoKChkb2MpID0+IHsKICAgICAgICAgICAgICBjb25zdCBjb2xsID0gW10KICAgICAgICAgICAgICBjb25zdCB7IGlkIH0gPSBkb2MKCiAgICAgICAgICAgICAgZG9jLmRhdGEoKVsnZXZlbnRzJ10uZm9yRWFjaCgoZG9jKSA9PiB7CiAgICAgICAgICAgICAgICB2YXIgdGhlVGltZSA9IGRvYy50aW1lLnNlY29uZHMqMTAwMAogICAgICAgICAgICAgICAgdmFyIGFUaW1lID0gcGFyc2VJbnQgKG1vbWVudCh0aGVUaW1lKS5mb3JtYXQoJ0hIJykpCiAgICAgICAgICAgICAgICBpZiAoYVRpbWUgPj0gdGhpcy50aW1lbWluICYmIGFUaW1lIDw9IHRoaXMudGltZW1heCl7CiAgICAgICAgICAgICAgICAgIGNvbGwucHVzaCh7IGRvYyB9KQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgIHRlc3RDb2xsZWN0aW9uLnB1c2goeyBbaWRdOiBjb2xsIH0pCgogICAgICAgICAgICB9KQoKICAgICAgICAgICAgdGhpcy5hbGxSZXN1bHRzID0gdGVzdENvbGxlY3Rpb24KICAgICAgICAgICAgdGhpcy5jcmVhdGVBcnJheXMoKQogICAgICAgICAgfQogICAgICAgIH0pCgogICAgfSwKICAgIGFzeW5jIGNyZWF0ZUFycmF5cygpewoKICAgIHRoaXMuYWxsUmVzdWx0cy5mb3JFYWNoKGRvYz0+ewogICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhkb2MpKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgTkVXICR7a2V5fTogJHt2YWx1ZX1gKQoKICAgICAgICAgICAgdmFyIHRoZUtleT1rZXkKCiAgICAgICAgICAgIGZvciAoY29uc3QgW2FrZXksIGF2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZG9jW3RoZUtleV0pKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgJHtha2V5fTogJHthdmFsdWV9YCkKICAgICAgICAgICAgICAgIGNvbnN0IHVzaW5nRGF0ZSA9IG1vbWVudChhdmFsdWVbJ2RvYyddWyd0aW1lJ10udG9EYXRlKCkpLmZvcm1hdCgnTU1NIERvIFlZJykKCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNpbmdEYXRlKTsKCiAgICAgICAgICAgICAgICBzd2l0Y2ggKGF2YWx1ZVsnZG9jJ11bJ2NhdGVnb3J5J10pIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2UnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYWxsZW5nZUxpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgLy90aGlzLmNoYWxsZW5nZUxpc3QucHVzaChhdmFsdWVbJ2RvYyddKQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdjaGFsbGVuZ2Utc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFsbGVuZ2VTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3NlY3JldCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VjcmV0TGlzdC5wdXNoKHsgW3VzaW5nRGF0ZV0gOmF2YWx1ZVsnZG9jJ119KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdzZWNyZXQtc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWNyZXRTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RpbWVyJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lckxpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAndGltZXItc21zJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lclNNU0xpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAndXNlci1zbXMnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJTTVNMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvbmUnOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvbmVMaXN0LnB1c2goeyBbdXNpbmdEYXRlXSA6YXZhbHVlWydkb2MnXX0pCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ3pvbmVzLXNtcyc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9uZVNNU0xpc3QucHVzaCh7IFt1c2luZ0RhdGVdIDphdmFsdWVbJ2RvYyddfSkKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYWxhcm0nOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsYXJtTGlzdC5wdXNoKHsgW3VzaW5nRGF0ZV0gOmF2YWx1ZVsnZG9jJ119KQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KICAgIH0pCgogICAgdGhpcy5zZWxlY3RDaGFydENvbHVtbnMoKQoKICB9LAoKICBhc3luYyBzZWxlY3RDaGFydENvbHVtbnMoKXsKCiAgICB0aGlzLnNlbmRCYXJEYXRhPVtdCiAgICB0aGlzLnNlbmRQaWVEYXRhPVtdCgogICAgY29uc29sZS5sb2codGhpcy5hbGFybUxpc3QpCgogaWYgKHRoaXMuY2hhbGxlbmdlTGlzdC5sZW5ndGg+MCAmJiB0aGlzLmNoYWxsZW5nZUNoZWNrKXsKICAgICAgdGhpcy5zZW5kUGllRGF0YS5wdXNoKHt2YWx1ZTogdGhpcy5jaGFsbGVuZ2VMaXN0Lmxlbmd0aCwgbmFtZTogJ0NvbmZyb250J30pCiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy5jaGFsbGVuZ2VMaXN0LCAnQ29uZnJvbnQnKQogICAgfQoKICAgIGlmICh0aGlzLmNoYWxsZW5nZVNNU0xpc3QubGVuZ3RoPjAgJiYgdGhpcy5jaGFsbGVuZ2VTTVNDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMuY2hhbGxlbmdlU01TTGlzdC5sZW5ndGgsIG5hbWU6ICdDb25mcm9udCBTTVMnfSkKICAgICAgYXdhaXQgdGhpcy5maWxsQ2hhcnRBcnJheSh0aGlzLmNoYWxsZW5nZVNNU0xpc3QsICdDb25mcm9udCBTTVMnKQogICAgfQoKICAgIGlmICh0aGlzLnNlY3JldExpc3QubGVuZ3RoPjAgJiYgdGhpcy5zZWNyZXRDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMuc2VjcmV0TGlzdC5sZW5ndGgsIG5hbWU6ICdTZWNyZXQnfSkKICAgICAgYXdhaXQgdGhpcy5maWxsQ2hhcnRBcnJheSh0aGlzLnNlY3JldExpc3QsICdTZWNyZXQnKQogICAgfQoKICAgIGlmICh0aGlzLnNlY3JldFNNU0xpc3QubGVuZ3RoPjAgJiYgdGhpcy5zZWNyZXRTTVNDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMuc2VjcmV0U01TTGlzdC5sZW5ndGgsIG5hbWU6ICdTZWNyZXQgU01TJ30pCiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy5zZWNyZXRTTVNMaXN0LCAnU2VjcmV0IFNNUycpCiAgICB9CgogICAgaWYgKHRoaXMudGltZXJMaXN0Lmxlbmd0aD4wICYmIHRoaXMudGltZXJDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMudGltZXJMaXN0Lmxlbmd0aCwgbmFtZTogJ1RpbWVyJ30pCiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy50aW1lckxpc3QsICdUaW1lcicpCiAgICB9CgogICAgaWYgKHRoaXMudGltZXJTTVNMaXN0Lmxlbmd0aD4wICYmIHRoaXMudGltZXJTTVNDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMudGltZXJTTVNMaXN0Lmxlbmd0aCwgbmFtZTogJ1RpbWVyIFNNUyd9KQogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMudGltZXJTTVNMaXN0LCAnVGltZXIgU01TJykKICAgIH0KCiAgICBpZiAodGhpcy56b25lTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnpvbmVDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMuem9uZUxpc3QubGVuZ3RoLCBuYW1lOiAnWm9uZSd9KQogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMuem9uZUxpc3QsICdab25lJykKICAgIH0KCiAgICBpZiAodGhpcy56b25lU01TTGlzdC5sZW5ndGg+MCAmJiB0aGlzLiB6b25lU01TQ2hlY2spewogICAgICB0aGlzLnNlbmRQaWVEYXRhLnB1c2goe3ZhbHVlOiB0aGlzLnpvbmVTTVNMaXN0Lmxlbmd0aCwgbmFtZTogJ1pvbmUgU01TJ30pCiAgICAgIGF3YWl0IHRoaXMuZmlsbENoYXJ0QXJyYXkodGhpcy56b25lU01TTGlzdCwgJ1pvbmUgU01TJykKICAgIH0KCiAgICBpZiAodGhpcy51c2VyU01TTGlzdC5sZW5ndGg+MCAmJiB0aGlzLnVzZXJTTVNDaGVjayl7CiAgICAgIHRoaXMuc2VuZFBpZURhdGEucHVzaCh7dmFsdWU6IHRoaXMudXNlclNNU0xpc3QubGVuZ3RoLCBuYW1lOiAnVXNlciBTTVMnfSkKICAgICAgYXdhaXQgdGhpcy5maWxsQ2hhcnRBcnJheSh0aGlzLnVzZXJTTVNMaXN0LCAnVXNlciBTTVMnKQogICAgfQoKICAgIGlmICh0aGlzLmFsYXJtTGlzdC5sZW5ndGg+MCAmJiB0aGlzLmFsYXJtQ2hlY2spewogICAgICB0aGlzLnNlbmRQaWVEYXRhLnB1c2goe3ZhbHVlOiB0aGlzLmFsYXJtTGlzdC5sZW5ndGgsIG5hbWU6ICdBbGFybSd9KQogICAgICBhd2FpdCB0aGlzLmZpbGxDaGFydEFycmF5KHRoaXMuYWxhcm1MaXN0LCAnQWxhcm0nKQogICAgfQoKICAgIGNvbnNvbGUubG9nKHRoaXMuc2VuZFBpZURhdGEpCiAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXROZXdCYXJDaGFydERhdGEnLE9iamVjdC52YWx1ZXModGhpcy5zZW5kQmFyRGF0YSkpCiAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3F1ZXJ5dXNlci9zZXRQaWVEYXRhJywgdGhpcy5zZW5kUGllRGF0YSkKCiAgfSwKCiAgYXN5bmMgZmlsbENoYXJ0QXJyYXkoY3JlYXRlZExpc3QsIGNhdGVnb3J5KXsKCiAgICB2YXIgdGFidWxhdGVkTGlzdCA9IHt9CgogICAgZm9yICh2YXIgdD0wOyB0PHRoaXMuYWxsU2VhcmNoRGF0ZXMubGVuZ3RoOyB0KyspewogICAgICBPYmplY3QuYXNzaWduKHRhYnVsYXRlZExpc3QsIHtbdGhpcy5hbGxTZWFyY2hEYXRlc1t0XV06IDB9KTsKICAgIH0KCiAgICBmb3IgKHZhciBpPTA7IGk8Y3JlYXRlZExpc3QubGVuZ3RoOyBpKyspewogICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY3JlYXRlZExpc3RbaV0pKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgTkVXICR7a2V5fTogJHt2YWx1ZX1gKQogICAgICAgICAgdGFidWxhdGVkTGlzdFtrZXldKysKICAgICAgICAgIC8vdGFidWxhdGVkTGlzdFtrZXldID0gdmFsdWUubGVuZ3RoCiAgICAgICAgfQogICAgfQoKICBjb25zb2xlLmxvZyh0YWJ1bGF0ZWRMaXN0KQoKICAgIGF3YWl0IHRoaXMuc2VuZEJhckRhdGEucHVzaCh7bmFtZTogY2F0ZWdvcnksIGRhdGE6IE9iamVjdC52YWx1ZXModGFidWxhdGVkTGlzdCl9KQoKICAgIHJldHVybgogIH0sCgogIGFzeW5jIGZpbGxHcm91cENoYXJ0QXJyYXkoY3JlYXRlZExpc3QsIGNhdGVnb3J5KXsKCiAgICB2YXIgdGFidWxhdGVkTGlzdCA9IHt9CgogICAgZm9yICh2YXIgdD0wOyB0PHRoaXMuYWxsU2VhcmNoRGF0ZXMubGVuZ3RoOyB0KyspewogICAgICBPYmplY3QuYXNzaWduKHRhYnVsYXRlZExpc3QsIHtbdGhpcy5hbGxTZWFyY2hEYXRlc1t0XV06IDB9KTsKICAgIH0KCiAgICBmb3IgKHZhciBpPTA7IGk8Y3JlYXRlZExpc3QubGVuZ3RoOyBpKyspewogICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoY3JlYXRlZExpc3RbaV0pKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhgTkVXICR7a2V5fTogJHt2YWx1ZX1gKQoKICAgICAgICAgIHRhYnVsYXRlZExpc3Rba2V5XSA9IHZhbHVlLmxlbmd0aAoKICAgICAgICAgIC8vZ2V0IHZhbHVlcyBiZWxvdyBlLmcuIG1hcCBsb2NhdGlvbnMKCiAgICAgICAgICAvLyBmb3IgKHZhciB2PTA7IHY8dmFsdWUubGVuZ3RoOyB2KyspewogICAgICAgICAgLy8gICBjb25zb2xlLmxvZyAodmFsdWVbdl1bJ2RvYyddWydldmVudElkJ10pCiAgICAgICAgICAvLyB9CgogICAgICAgIH0KICAgIH0KCiAgLy9jb25zb2xlLmxvZyh0YWJ1bGF0ZWRMaXN0KQoKICAgIGF3YWl0IHRoaXMuc2VuZEJhckRhdGEucHVzaCh7bmFtZTogY2F0ZWdvcnksIGRhdGE6IE9iamVjdC52YWx1ZXModGFidWxhdGVkTGlzdCl9KQoKICAgIHJldHVybgogIH0KCgoKICB9Cn0K"},null]}